(function(t){function e(e){for(var n,o,r=e[0],l=e[1],u=e[2],p=0,d=[];p<r.length;p++)o=r[p],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var c=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),i=a.n(n);i.a},"039a":function(t,e,a){"use strict";var n=a("7174"),i=a.n(n);i.a},"0ea0":function(t,e,a){},2258:function(t,e,a){},"552d":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("ba4c"),i=a.n(n),s=a("8c4f"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("NaviBar"),a("router-view")],1)},r=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative","z-index":"1"}},[a("Menu",{ref:"menu",attrs:{mode:"horizontal",theme:t.theme,"active-name":t.active},on:{"on-select":t.outFocus}},[a("MenuItem",{attrs:{name:"index",to:"/index"}},[t._v(" WESHARE ")]),a("MenuItem",{attrs:{name:"edit",to:"/edit"}},[a("Icon",{attrs:{type:"md-paper"}}),t._v(" 发布新帖 ")],1),a("MenuItem",{staticStyle:{width:"30%"},attrs:{name:"search"}},[a("i-input",{staticStyle:{"margin-top":"14px"},on:{"on-enter":t.search},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},[a("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},[a("Option",{attrs:{value:"posting"}},[t._v("帖子")]),a("Option",{attrs:{value:"topic"}},[t._v("话题")]),a("Option",{attrs:{value:"user"}},[t._v("用户")])],1),a("Button",{attrs:{slot:"append",icon:"md-search"},on:{click:t.search},slot:"append"})],1)],1),a("MenuItem",{staticStyle:{float:"right"},attrs:{name:"login"}},[a("Submenu",{attrs:{name:"login"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"md-person"}}),t._v(" "+t._s(t.loginOrName)+" ")],1),a("MenuGroup",{attrs:{title:"用户账户"}},[a("MenuItem",{attrs:{name:"login"}},[t._v(" "+t._s(t.loginOrlogout)+" ")]),a("MenuItem",{attrs:{name:"register"}},[t._v(" "+t._s(t.registerOrPersonal)+" ")])],1)],2)],1)],1)],1)},u=[],c=(a("1276"),{name:"NaviBar",data:function(){return{theme:"light",searchType:"posting",searchTextData:"",active:"logo"}},computed:{searchText:{get:function(){return void 0!==this.$route.query.text?"postingbytag"==this.$route.query.type?"话题："+this.$route.query.text:this.$route.query.text:""!==this.searchTextData?this.searchTextData:""},set:function(t){this.searchTextData=t}},loginOrName:function(){return this.$root.hasLogin?"ID: "+this.$root.userId:"登录/注册"},loginOrlogout:function(){return this.$root.hasLogin?"登出":"登录"},registerOrPersonal:function(){return this.$root.hasLogin?"个人主页":"注册"}},methods:{search:function(){""!==this.searchTextData&&void 0!==this.searchTextData?this.$router.push({path:"/search",query:{type:this.searchType,text:this.searchTextData}}):void 0!==this.searchText&&""!==this.searchText&&this.$router.push({path:"/search",query:{type:this.searchType,text:this.searchText}})},outFocus:function(t){var e=this;"login"===t?!1===this.$root.hasLogin?this.$router.push({path:"/login"}):(this.$root.hasLogin=!1,this.$root.userId=!1,this.$router.push({path:"/index"}),this.$Message.warning("已登出")):"register"==t&&(!1===this.$root.hasLogin?this.$router.push({path:"/register"}):this.$router.push({path:"/personalpage",query:{userId:this.$root.userId}})),this.$nextTick((function(){e.active=e.$route.path.substr(1).split("/")[0],e.$refs.menu.updateActiveName(),"search"===t&&"search"!==e.$route.path.substr(1).split("/")[0]&&(e.active="logo",e.$refs.menu.updateActiveName())}))}},mounted:function(){var t=this;this.$nextTick((function(){t.active=t.$route.path.substr(1).split("/")[0],t.$refs.menu.updateActiveName()}))}}),p=c,d=a("2877"),g=Object(d["a"])(p,l,u,!1,null,"565f9352",null),h=g.exports,m={name:"app",components:{NaviBar:h}},f=m,y=(a("034f"),Object(d["a"])(f,o,r,!1,null,null,null)),v=y.exports,b=a("f825"),x=a.n(b),I=(a("f8ce"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative","z-index":"0"}},[a("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[a("FormItem",{staticStyle:{margin:"30px 0 0 30px",display:"flex","justify-content":"left"},attrs:{prop:"title"}},[a("i-input",{staticStyle:{width:"600px"},attrs:{type:"text",placeholder:t.titleInputText,disabled:t.ifAppend},model:{value:t.formInline.title,callback:function(e){t.$set(t.formInline,"title",e)},expression:"formInline.title"}},[a("Icon",{attrs:{slot:"prepend",type:"md-text"},slot:"prepend"})],1)],1),a("FormItem",{staticStyle:{display:"flex","justify-content":"left",margin:"30px 0 0 30px"},attrs:{prop:"tagAry"}},[a("div",{staticStyle:{display:"flex","justify-content":"left","align-content":"center"}},[t._l(t.tags,(function(e){return a("Tag",{key:e,attrs:{type:"dot",closable:"",color:"primary",name:e},on:{"on-close":t.handleClose}},[t._v(" "+t._s(e)+" ")])})),a("i-input",{staticStyle:{width:"200px",margin:"1px"},attrs:{disabled:t.ifAppend},on:{"on-enter":t.handleAdd},model:{value:t.newTagText,callback:function(e){t.newTagText=e},expression:"newTagText"}},[a("Button",{attrs:{slot:"append",icon:"ios-add",type:"dashed",size:"small",disabled:t.ifAppend},on:{click:t.handleAdd},slot:"append"},[t._v(" "+t._s(t.addTagText)+" ")])],1)],2)]),a("div",{staticClass:"markdown",staticStyle:{margin:"30px 30px 0 30px",position:"relative","z-index":"0"}},[a("div",{staticClass:"container"},[a("mavon-editor",{ref:"md",staticStyle:{"min-height":"500px"},attrs:{toolbars:t.toolbars},on:{imgAdd:t.$imgAdd,imgDel:t.$imgDel,change:t.change},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)]),a("FormItem",[a("Button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",loading:t.loading,shape:"circle",icon:"md-checkbox"},on:{click:function(e){return t.handleSubmit("formInline")}}},[t._v(" 提交 ")])],1)],1)],1)}),w=[],$=(a("a434"),a("b2d8")),T=(a("64e1"),a("bc3a")),_=a.n(T),q="",k=_.a.create({baseURL:q,headers:{"Content-Type":"application/json"}}),L={get:function(t,e,a,n,i){k.request({url:"testData"==q?"editSubmit.json":"/edit",method:"GET",params:{title:t,topics:e,content:a,posterId:n}}).then((function(t){var e=t.data.response;i(e)})).catch((function(t){window.console.log(t)}))}},S="",P=_.a.create({baseURL:S,headers:{"Content-Type":"application/json"}}),D={get:function(t,e,a){P.request({url:"testData"==S?"editSubmit.json":"/edit",method:"GET",params:{postingId:t,content:e}}).then((function(t){var e=t.data.response;a(e)})).catch((function(t){window.console.log(t)}))}},M={name:"Edit",props:[],data:function(){return{string:"",minRows:{minRows:25},content:"",html:"",configs:{},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!1,undo:!0,redo:!0,trash:!1,save:!1,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},loading:!1,tags:[],newTagText:"",formInline:{title:"",tagAry:[]},userId:-1}},components:{mavonEditor:$["mavonEditor"]},computed:{ifAppend:function(){return void 0!==this.$route.query.postingId},addTagText:function(){return void 0!==this.$route.query.postingId?"盖楼无需添加话题":"添加话题"},titleInputText:function(){return void 0!==this.$route.query.postingId?"盖楼无需添加标题":"标题"},ruleInline:function(){return void 0!==this.$route.query.postingId?{}:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],tagAry:[{required:!0,type:"array",min:1,message:"最少需要1个话题",trigger:"blur, change"},{type:"array",max:5,message:"话题须少于5个",trigger:"blur, change"}]}}},methods:{$imgAdd:function(t,e){var a=this,n=new FormData;n.append("image",e),{url:"server url",method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}}.then((function(e){a.$vm.$img2Url(t,e)}))},$imgDel:function(t){window.console.log(t)},change:function(t,e){this.html=e},submit:function(){var t=this;this.loading=!0,void 0!==this.$route.query.postingId?D.get(this.$route.query.postingId,this.content,(function(e){200==e?(t.loading=!1,t.$Message.success("盖楼成功，将跳转至帖子"),t.$router.push({path:"/posting",query:{postingId:t.$route.query.postingId}})):t.$Message.error("发布错误")})):L.get(this.formInline.title,this.tags,this.content,this.$root.userId,(function(e){200==e?(t.loading=!1,t.$Message.success("发布成功，将跳转至首页"),t.$router.push({path:"/index"})):t.$Message.error("发布错误")}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?e.submit():e.$Message.error("请检查各项内容")}))},handleAdd:function(){if(this.tags.length>=5)this.$Message["warning"]({background:!0,content:"话题须少于5个"});else if(void 0!==this.newTagText&&""!==this.newTagText){for(this.key in this.tags)if(this.tags[this.key]===this.newTagText)return void this.$Message["warning"]({background:!0,content:"话题已存在"});this.tags.push(this.newTagText),this.formInline.tagAry.push(""),this.newTagText=""}else this.$Message["warning"]({background:!0,content:"话题内容不能为空"})},handleClose:function(t,e){for(this.key in this.tags)if(this.tags[this.key]===e)return this.tags.splice(this.key,1),void this.formInline.tagAry.pop()}},mounted:function(){var t=this;!1===this.$root.hasLogin&&this.$nextTick((function(){t.$Message.error("请先登录"),t.$router.push({path:"login"})}))}},j=M,R=Object(d["a"])(j,I,w,!1,null,"1b6c387d",null),E=R.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Scroll",{staticStyle:{position:"relative","z-index":"0"},attrs:{height:t.avaiHeight}},[a("card",{staticStyle:{"max-width":"1200px",margin:"20px auto 0 auto",padding:"0 20px"}},[a("Tabs",{attrs:{animated:!1},model:{value:t.tabType,callback:function(e){t.tabType=e},expression:"tabType"}},[a("TabPane",{attrs:{label:t.popularPosting,disabled:t.postingTab,name:"posting"}},[a("List",{attrs:{"item-layout":"vertical"}},t._l(t.list,(function(e){return a("ListItem",{key:e.postingId,staticStyle:{"text-align":"left"}},[a("ListItemMeta",{attrs:{avatar:e.avatar}},[a("template",{slot:"description"},t._l(e.topic,(function(e){return a("router-link",{key:e.tagId,attrs:{to:{path:"/search",query:{type:"postingbytag",text:e.tagId}}}},[a("tag",{attrs:{color:"blue"}},[t._v(" "+t._s(e.tagName)+" ")])],1)})),1),a("template",{slot:"title"},[a("router-link",{attrs:{to:{path:"/posting",query:{postingId:e.postingId}}}},[t._v(" "+t._s(e.title)+" ")])],1)],2),t._v(" "+t._s(e.content)+" "),a("template",{slot:"action"},[a("li",[a("Icon",{attrs:{type:"md-information-circle"}}),t._v(" 帖子ID "+t._s(e.postingId)+" ")],1),a("li",[a("Icon",{attrs:{type:"md-eye"}}),t._v(" 浏览量 "+t._s(e.views)+" ")],1),a("li",[a("Icon",{attrs:{type:"md-star"}}),t._v(" 收藏量 "+t._s(e.stars)+" ")],1)]),a("template",{staticStyle:{"max-height":"fit-content"},slot:"extra"},[a("img",{staticStyle:{"max-height":"200px"},attrs:{src:e.pic}})])],2)})),1)],1),a("TabPane",{attrs:{label:t.popularTopic,disabled:t.topicTab,name:"topic"}},[a("div",{staticStyle:{"text-align":"left"}},t._l(t.tlist,(function(t){return a("CellGroup",{key:t.tagId,staticStyle:{padding:"5px"}},[a("Cell",{attrs:{title:t.tagName,extra:"搜索该话题下的帖子",to:{path:"/search",query:{type:"postingbytag",text:t.tagId}}}},[a("template",{slot:"label"})],2)],1)})),1)]),a("TabPane",{attrs:{label:t.popularUser,disabled:t.userTab,name:"user"}},[a("div",{staticStyle:{"text-align":"left"}},t._l(t.ulist,(function(e){return a("CellGroup",{key:e.userId,staticStyle:{padding:"5px"}},[a("Cell",{attrs:{to:{path:"/personalpage",query:{userId:e.userId}}}},[a("avatar",{attrs:{src:e.avatar}}),[t._v(" "+t._s(e.userName)+" ")],a("template",{slot:"label"},[t._v(" 用户ID: "+t._s(e.userId)+" ")])],2)],1)})),1)])],1)],1),a("Button",{staticStyle:{margin:"20px auto"},attrs:{type:"primary",loading:t.loading,icon:"ios-more",shape:"circle"},on:{click:t.toLoading}},[t.loading?a("span",[t._v("Loading...")]):a("span",[t._v("加载更多")])])],1)},C=[],F=(a("d3b7"),a("d81d"),""),B=_.a.create({baseURL:F,headers:{"Content-Type":"application/json"}}),V=function(t){return t},O={get:function(t,e,a){B.request({url:"testData"==F?"posting"==t?"/popPosting.json":"/popTopic.json":"/index",method:"GET",params:{type:t,page:e}}).then((function(t){var e=t.data.list.map((function(t){return V(t)}));a(e)})).catch((function(t){window.console.log(t)}))}},A="",U=_.a.create({baseURL:A,headers:{"Content-Type":"application/json"}}),H=function(t){return t},Q={get:function(t,e,a,n){U.request({url:"testData"==A?"posting"==t||"postingbytag"==t?"/searchPosting.json":"topic"==t?"/searchTopic.json":"/searchUser.json":"/search",method:"GET",params:{type:t,text:e,page:a}}).then((function(t){var e=t.data.list.map((function(t){return H(t)}));n(e)})).catch((function(t){window.console.log(t)}))}},N={name:"ItemList",data:function(){return{avaiHeight:document.documentElement.clientHeight-60,loading:!1,tabTypeData:"",list:[],tlist:[],ulist:[],curPage:0}},computed:{tabType:{get:function(){return this.pageResize(),"postingbytag"===this.$route.query.type||"postingbytag"===this.tabTypeData?"posting":void 0!==this.$route.query.type?this.$route.query.type:""!==this.tabTypeData&&"user"!==this.tabTypeData?this.tabTypeData:"posting"},set:function(t){this.tabTypeData=t}},postingTab:function(){return"posting"!==this.$route.query.type&&void 0!==this.$route.query.type&&"postingbytag"!==this.$route.query.type},topicTab:function(){return"topic"!==this.$route.query.type&&void 0!==this.$route.query.type},userTab:function(){return"user"!==this.$route.query.type},popularPosting:function(){return void 0===this.$route.query.type?"热门帖子":"postingbytag"===this.$route.query.type?"话题下帖子的搜索结果":"帖子的搜索结果"},popularTopic:function(){return void 0===this.$route.query.type?"热门话题":"话题的搜索结果"},popularUser:function(){return void 0===this.$route.query.type?"热门用户":"用户的搜索结果"}},methods:{handleReachBottom:function(){var t=this;return new Promise((function(e){setTimeout((function(){void 0===t.$route.query.type?O.get(t.tabType,t.curPage+1,(function(e){if("posting"===t.tabType)for(var a in e)t.list.push(e[a]);else for(var n in e)t.tlist.push(e[n]);t.curPage+=1})):Q.get(t.$route.query.type,t.$route.query.text,t.curPage+1,(function(e){if("topic"===t.tabType)for(var a in e)t.tlist.push(e[a]);else if("user"===t.tabType)for(var n in e)t.ulist.push(e[n]);else for(var i in e)t.list.push(e[i]);t.curPage+=1})),e(),t.loading=!1}),10)}))},pageResize:function(){var t=this;this.$nextTick((function(){t.avaiHeight=document.documentElement.clientHeight-60}))},toLoading:function(){this.loading=!0,this.handleReachBottom()},updateList:function(){var t=this;this.list=void 0,this.tlist=void 0,this.ulist=void 0,"index"===this.$route.path.substr(1).split("/")[0]?(O.get("posting","1",(function(e){t.list=e})),O.get("topic","1",(function(e){t.tlist=e}))):Q.get(this.$route.query.type,this.$route.query.text,1,(function(e){"posting"===t.$route.query.type||void 0===t.$route.query.type||"postingbytag"===t.$route.query.type?t.list=e:"topic"===t.$route.query.type||void 0===t.$route.query.type?t.tlist=e:"user"===t.$route.query.type&&(t.ulist=e)})),this.curPage=1}},created:function(){this.updateList()},mounted:function(){var t=this;window.onresize=function(){t.pageResize()}},destroyed:function(){window.onresize=null},watch:{$route:function(){this.updateList()}}},G=N,J=Object(d["a"])(G,z,C,!1,null,"6dff08ec",null),W=J.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{attrs:{dir:"rtl"}},[a("Scroll",{staticStyle:{"max-width":"1200px",margin:"0 20px 0 0","min-width":"1000px"},attrs:{height:t.avaiHeight}},[a("div",{attrs:{dir:"ltr"}},[a("card",{staticStyle:{"margin-top":"20px","margin-left":"50px",padding:"0 20px"}},[a("List",{attrs:{"item-layout":"vertical"}},[a("ListItem",{key:t.postingId,staticStyle:{"text-align":"left",display:"flex"}},[a("ListItemMeta",{attrs:{title:t.posting.title,avatar:t.posting.avatar}},[t._l(t.posting.topic,(function(e){return a("template",{slot:"description"},[t._v(" "+t._s(e)+" ")])}))],2),a("template",{slot:"action"},[a("li",{on:{click:t.follow}},[a("Icon",{attrs:{type:"md-add"}}),t._v(" 关注用户 ")],1),a("li",{on:{click:t.star}},[a("Icon",{attrs:{type:"md-star"}}),t._v(" 收藏帖子 ")],1),a("li",{on:{click:t.toPersonal}},[a("Icon",{attrs:{type:"md-eye"}}),t._v(" 查看用户 ")],1)])],2),t._l(t.list,(function(e){return a("ListItem",{key:e.time,staticStyle:{"text-align":"left"}},[a("ListItemMeta",{attrs:{description:e.time}}),t._v(" "+t._s(e.content)+" "),a("template",{staticStyle:{"max-height":"fit-content"},slot:"extra"},[a("img",{staticStyle:{"max-height":"200px"},attrs:{src:e.pic}})])],2)}))],2)],1),a("Button",{staticStyle:{margin:"20px auto"},attrs:{type:"primary",loading:t.loading,icon:"ios-more",shape:"circle"},on:{click:t.toLoading}},[t.loading?a("span",[t._v("Loading...")]):a("span",[t._v("加载更多")])]),a("Button",{staticStyle:{margin:"20px"},attrs:{type:"primary",icon:"md-hammer",shape:"circle",disabled:!t.ableToAppend},on:{click:t.append}},[t.ableToAppend?a("span",[t._v("盖楼")]):a("span",[t._v("只有贴主才可以盖楼")])])],1)])],1),a("router-view")],1)},X=[],Y="",Z=_.a.create({baseURL:Y,headers:{"Content-Type":"application/json"}}),tt={get:function(t,e,a,n){Z.request({url:"testData"==Y?0!==e?"/postingContent.json":"/postingQuestion.json":"/posting/question",method:"GET",params:{postingId:t,postingPage:e,questionPage:a}}).then((function(t){var e=t.data;n(e)})).catch((function(t){window.console.log(t)}))}},et="",at=_.a.create({baseURL:et,headers:{"Content-Type":"application/json"}}),nt={get:function(t,e,a){at.request({url:"testData"==et?"editSubmit.json":"/follow",method:"GET",params:{followedId:t,followerId:e}}).then((function(t){var e=t.data.response;a(e)})).catch((function(t){window.console.log(t)}))}},it="",st=_.a.create({baseURL:it,headers:{"Content-Type":"application/json"}}),ot={get:function(t,e,a){st.request({url:"testData"==it?"editSubmit.json":"/star",method:"GET",params:{postingId:t,userId:e}}).then((function(t){var e=t.data.response;a(e)})).catch((function(t){window.console.log(t)}))}},rt={name:"Posting",data:function(){return{avaiHeight:document.documentElement.clientHeight-60,loading:!1,posting:[],list:[],postingPage:0}},computed:{postingId:function(){return this.$route.query.postingId},ableToAppend:function(){return!(!this.$root.hasLogin||this.$root.userId!==this.posting.posterId)}},methods:{handleReachBottom:function(){var t=this;return new Promise((function(e){setTimeout((function(){tt.get(t.postingId,t.postingPage+1,0,(function(e){for(var a in e.list)t.list.push(e.list[a]);t.postingPage+=1})),e(),t.loading=!1}),10)}))},pageResize:function(){var t=this;this.$nextTick((function(){t.avaiHeight=document.documentElement.clientHeight-60}))},toLoading:function(){this.loading=!0,this.handleReachBottom()},append:function(){this.$router.push({path:"/edit",query:{postingId:this.postingId}})},follow:function(){var t=this;!0!==this.$root.hasLogin?this.$Message.warning("需要登录"):this.$root.userId===this.posting.posterId?this.$Message.warning("不能关注自己"):nt.get(this.posting.posterId,this.$root.userId,(function(e){200===e?t.$Message.success("关注成功"):t.$Message.warning("已在关注列表")}))},star:function(){var t=this;!0!==this.$root.hasLogin?this.$Message.warning("需要登录"):this.$root.userId===this.posting.posterId?this.$Message.warning("不能关注自己的帖子"):ot.get(this.postingId,this.$root.userId,(function(e){200===e?t.$Message.success("收藏成功"):t.$Message.warning("已在收藏列表")}))},toPersonal:function(){this.$router.push({path:"/personalpage",query:{userId:this.posting.posterId}})}},mounted:function(){var t=this;if(null!==window.onresize){var e=window.onresize;window.onresize=function(){e(),t.pageResize()}}else window.onresize=function(){t.pageResize()}},destroyed:function(){window.onresize=null},created:function(){var t=this;tt.get(this.postingId,1,0,(function(e){t.list=e.list,t.posting=e.posting,t.postingPage=1}))}},lt=rt,ut=Object(d["a"])(lt,K,X,!1,null,"461259b8",null),ct=ut.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("div",{staticClass:"from-wrap"},[a("h2",[t._v("登录")]),a("Form",{ref:"loginData",attrs:{model:t.loginData,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"Email",prop:"account"}},[a("Input",{attrs:{type:"email",placeholder:"请输入账号"},model:{value:t.loginData.account,callback:function(e){t.$set(t.loginData,"account",e)},expression:"loginData.account"}})],1),a("FormItem",{attrs:{label:"Password",prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit("loginData")}},model:{value:t.loginData.password,callback:function(e){t.$set(t.loginData,"password",e)},expression:"loginData.password"}})],1),a("FormItem",{staticClass:"form-footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("loginData")}}},[t._v("Submit")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("loginData")}}},[t._v("Reset")])],1),a("router-link",{attrs:{to:"register"}},[t._v("没有账户？注册一个")])],1)],1)])},dt=[],gt="",ht=_.a.create({baseURL:gt,headers:{"Content-Type":"application/json"}}),mt={get:function(t,e,a){ht.request({url:"testData"==gt?"/loginUser.json":"/login",method:"GET",params:{email:t,password:e}}).then((function(t){var e=t.data;a(e)})).catch((function(t){window.console.log(t)}))}},ft={name:"Login",data:function(){return{loginData:{account:"",password:""},ruleValidate:{account:[{required:!0,message:"账号不能为空",trigger:"blur"},{type:"email",message:"邮箱格式错误",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,max:16,message:"密码长度6-16个字符",trigger:"blur"}]}}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){var a;t?(a=window.btoa(e.loginData.password),mt.get(e.loginData.account,a,(function(t){0===t["isSuccess"]?(e.$Message.success("登录成功!"),e.$root.hasLogin=!0,e.$root.userId=t["userId"],e.$router.push({path:"index"})):e.$Message.error("登录失败，账户或密码错误!")}))):e.$Message.error("输入信息格式错误!")}))},handleReset:function(t){this.$refs[t].resetFields()}}},yt=ft,vt=(a("039a"),Object(d["a"])(yt,pt,dt,!1,null,null,null)),bt=vt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register"},[a("div",{staticClass:"from-wrap"},[a("h2",[t._v("注册")]),a("Form",{ref:"registerData",attrs:{model:t.registerData,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"Email",prop:"account"}},[a("label",[a("Input",{attrs:{type:"email",placeholder:"请输入账号"},model:{value:t.registerData.account,callback:function(e){t.$set(t.registerData,"account",e)},expression:"registerData.account"}})],1)]),a("FormItem",{attrs:{label:"Name",prop:"name"}},[a("label",[a("Input",{attrs:{type:"text",placeholder:"请输入昵称"},model:{value:t.registerData.name,callback:function(e){t.$set(t.registerData,"name",e)},expression:"registerData.name"}})],1)]),a("FormItem",{attrs:{label:"Password",prop:"password"}},[a("label",[a("Input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit("registerData")}},model:{value:t.registerData.password,callback:function(e){t.$set(t.registerData,"password",e)},expression:"registerData.password"}})],1)]),a("FormItem",{staticClass:"form-footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("registerData")}}},[t._v("Submit")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("registerData")}}},[t._v("Reset")])],1)],1),a("router-link",{attrs:{to:"login"}},[t._v("已有账户？去登录")])],1)])},It=[],wt=(a("b0c0"),""),$t=_.a.create({baseURL:wt,headers:{"Content-Type":"application/json"}}),Tt={get:function(t,e,a,n){$t.request({url:"testData"==wt?"/register.json":"/register",method:"GET",params:{email:t,userName:e,password:a}}).then((function(t){var e=t.data;n(e)})).catch((function(t){window.console.log(t)}))}},_t={name:"Register",data:function(){return{registerData:{account:"",name:"",password:""},ruleValidate:{account:[{required:!0,message:"账号不能为空",trigger:"blur"},{type:"email",message:"邮箱格式错误",trigger:"blur"}],name:[{required:!0,message:"昵称不可为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,max:16,message:"密码长度6-16个字符",trigger:"blur"}]}}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){var a;t?(a=window.btoa(e.registerData.password),Tt.get(e.registerData.account,e.registerData.name,a,(function(t){0===t["isSuccess"]?(e.$Message.success("注册成功!"),e.$root.hasLogin=!0,e.$root.userId=t["userId"],e.$router.push({path:"index"})):e.$Message.error("该邮箱已被注册！")}))):e.$Message.error("输入信息格式错误!")}))},handleReset:function(t){this.$refs[t].resetFields()}}},qt=_t,kt=(a("f30e"),Object(d["a"])(qt,xt,It,!1,null,null,null)),Lt=kt.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",t._b({attrs:{id:"upper"}},"div",t.user,!1),[a("div",{staticStyle:{"margin-left":"20px"}},[a("avatar",{attrs:{src:t.user.avatar,size:"150"}})],1),a("div",{attrs:{id:"right"}},[a("div",{staticStyle:{"margin-top":"40px"}},[a("h1",[t._v(t._s(t.user.username))])]),a("Tooltip",{attrs:{"max-width":"300",content:t.user.intro}},[a("div",{staticClass:"text"},[a("Icon",{attrs:{type:"md-information-circle",size:"24"}}),t._v(" "+t._s(t.user.intro)+" ")],1)])],1),a("div",{staticStyle:{"margin-top":"110px","margin-left":"240px"}},[a("Button",{attrs:{type:"primary",ghost:"",to:"/changeInfo",disabled:t.editable}},[t._v("编辑个人资料")])],1)]),a("div",[a("personal-list")],1)])},Pt=[],Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("card",{staticStyle:{"max-width":"1000px",margin:"20px auto 0 auto",padding:"0 20px"}},[a("Tabs",{model:{value:t.tabType,callback:function(e){t.tabType=e},expression:"tabType"}},[a("TabPane",{attrs:{label:"我的收藏",disabled:t.postingTab,name:"posting"}},[a("List",{attrs:{"item-layout":"vertical"}},t._l(t.favoriteList,(function(e){return a("ListItem",{key:e.postingId,staticStyle:{"text-align":"left"}},[a("ListItemMeta",{attrs:{avatar:e.avatar}},[a("template",{slot:"description"},t._l(e.topic,(function(e){return a("router-link",{key:e.tagId,attrs:{to:{path:"/search",query:{type:"postingbytag",text:e.tagId}}}},[a("tag",{attrs:{color:"blue"}},[t._v(" "+t._s(e.tagName)+" ")])],1)})),1),a("template",{slot:"title"},[a("router-link",{attrs:{to:{path:"/posting",query:{postingId:e.postingId}}}},[t._v(" "+t._s(e.title)+" ")])],1)],2),t._v(" "+t._s(e.content)+" "),a("template",{slot:"action"},[a("li",[a("Icon",{attrs:{type:"md-information-circle"}}),t._v(" 帖子ID "+t._s(e.postingId)+" ")],1),a("li",[a("Icon",{attrs:{type:"md-eye"}}),t._v(" 浏览量 "+t._s(e.views)+" ")],1),a("li",[a("Icon",{attrs:{type:"md-star"}}),t._v(" 收藏量 "+t._s(e.stars)+" ")],1)]),a("template",{staticStyle:{"max-height":"fit-content"},slot:"extra"},[a("img",{staticStyle:{"max-height":"200px"},attrs:{src:e.pic}})])],2)})),1)],1),a("TabPane",{attrs:{label:"我的帖子",disabled:t.topicTab,name:"topic"}},[a("List",t._l(t.postList,(function(e){return a("ListItem",{key:e.postingId,staticStyle:{"text-align":"left"}},[a("ListItemMeta",{attrs:{avatar:""}},[a("template",{slot:"description"},t._l(e.topic,(function(e){return a("router-link",{key:e.tagId,attrs:{to:{path:"/search",query:{type:"postingbytag",text:e.tagId}}}},[a("tag",{attrs:{color:"blue"}},[t._v(" "+t._s(e.tagName)+" ")])],1)})),1),a("template",{slot:"title"},[a("router-link",{attrs:{to:{path:"/posting",query:{postingId:e.postingId}}}},[t._v(" "+t._s(e.title)+" ")])],1)],2),a("template",{slot:"action"},[a("li",[a("Icon",{attrs:{type:"ios-eye-outline"}}),t._v(" 浏览量 "+t._s(e.views)+" ")],1),a("li",[a("Icon",{attrs:{type:"ios-star-outline"}}),t._v(" 收藏量 "+t._s(e.stars)+" ")],1),a("li",[a("Button",{attrs:{disabled:t.editable},on:{click:function(a){return t.deletePosting(e.postingId)}}},[t._v("删除")])],1)])],2)})),1)],1),a("TabPane",{attrs:{label:"我的关注",disabled:t.userTab,name:"user"}},[a("List",t._l(t.userList,(function(e){return a("ListItem",{key:e.userId,staticStyle:{"text-align":"left"}},[a("ListItemMeta",{attrs:{description:e.introduction}},[a("template",{slot:"avatar"},[a("avatar",{attrs:{src:e.avatar,size:"40"}})],1),a("template",{slot:"title"},[a("router-link",{attrs:{to:{path:"/personalPage",query:{userId:e.userId}}}},[a("div",{staticStyle:{"font-size":"24px"}},[t._v(" "+t._s(e.userName)+" ")])])],1)],2),a("template",{slot:"action"},[a("li",[a("Button",{attrs:{type:"primary",disabled:t.editable},on:{click:function(a){return t.unfollow(e.userId)}}},[t._v("取消关注")])],1)])],2)})),1)],1)],1)],1),a("Button",{staticStyle:{margin:"20px auto"},attrs:{type:"primary",loading:t.loading,icon:"ios-more",shape:"circle"},on:{click:t.toLoading}},[t.loading?a("span",[t._v("Loading...")]):a("span",[t._v("加载更多")])])],1)},Mt=[],jt="",Rt=_.a.create({baseURL:jt,headers:{"Content-Type":"application/json"}}),Et=function(t){return t},zt={getUserInfo:function(t,e){Rt.request({url:"testData"==jt?"/userInfo.json":"/personalPage",method:"GET",params:{userId:t}}).then((function(t){var a=t.data.userInfo;e(a)})).catch((function(t){window.console.log(t)}))},changeUserInfo:function(t,e,a,n,i,s,o){Rt.request({url:"testData"===jt?"/editUserInfoConfirm.json":"/changeInfo",method:"GET",params:{userId:t,avatar:e,userName:a,gender:n,email:i,introduction:s}}).then((function(t){var e=t.data;o(e)}))},getMyPage:function(t,e,a,n){Rt.request({url:"testData"===jt?"myFavorite"===e?"/MyFavo.json":"myPost"===e?"/myPost.json":"/myFocus.json":"/personalPage",method:"GET",params:{userId:t,type:e,page:a}}).then((function(t){var e=t.data.list.map((function(t){return Et(t)}));n(e)})).catch((function(t){window.console.log(t)}))},unfollowUser:function(t,e,a){Rt.request({url:"testData"===jt?"/editUserInfoConfirm.json":"/personalPage/personalList",method:"GET",params:{userId:t,followedId:e}}).then((function(t){var e=t.data;a(e)}))},deletePost:function(t,e,a){Rt.request({url:"testData"===jt?"/editUserInfoConfirm.json":"/personalPage/personalList",method:"GET",params:{userId:t,postingId:e}}).then((function(t){var e=t.data;a(e)}))}},Ct={name:"PersonalList",data:function(){return{loading:!1,favoriteList:[],postList:[],userList:[],tabType:"posting",favorPage:0,focusPage:0,postPage:0}},computed:{postingTab:function(){return"posting"!==this.$route.query.type&&void 0!==this.$route.query.type&&"postingbytag"!==this.$route.query.type},topicTab:function(){return"topic"!==this.$route.query.type&&void 0!==this.$route.query.type},userTab:function(){return"user"!==this.$route.query.type&&void 0!==this.$route.query.type},editable:function(){return this.$root.userId!==this.$route.query.userId}},methods:{handleReachBottom:function(){var t=this;return new Promise((function(e){setTimeout((function(){"posting"===t.tabType?zt.getMyPage(t.$root.userId,"myFavorite",t.favorPage,(function(e){for(var a in e)t.favoriteList.push(e[a])})):"topic"===t.tabType?zt.getMyPage(t.$root.userId,"myPost",t.postPage,(function(e){for(var a in e)t.postList.push(e[a])})):"user"===t.tabType&&zt.getMyPage(t.$root.userId,"myFocus",t.focusPage,(function(e){for(var a in e)t.userList.push(e[a])})),e(),t.loading=!1}),10)}))},pageResize:function(){var t=this;this.$nextTick((function(){t.avaiHeight=document.documentElement.clientHeight-60}))},unfollow:function(t){var e=this;zt.unfollowUser(this.$root.userId,t,(function(t){0===t["isSuccess"]?(e.$Message.success("取关成功！"),e.updateList()):e.$Message.error("取关失败")}))},deletePosting:function(t){var e=this;!0===this.$root.hasLogin&&zt.deletePost(this.$root.userId,t,(function(t){0===t["isSuccess"]?(e.updateList(),e.$Message.success("删除成功！")):e.$Message.error("删除失败！")}))},toLoading:function(){this.loading=!0,this.handleReachBottom()},changeType:function(){return"posting"===this.tabType?"myFavorite":"topic"===this.tabType?"myPost":"user"===this.tabType?"myFocus":void 0},updateList:function(){var t=this;this.favoriteList=void 0,this.postList=void 0,this.userList=void 0;var e=this.changeType();zt.getMyPage(this.$root.userId,e,"1",(function(a){"myFavorite"===e?t.favoriteList=a:"myPost"===e?t.postList=a:"myFocus"===e&&(t.userList=a)})),this.favorPage=1,this.postPage=1,this.focusPage=1}},created:function(){this.updateList()},mounted:function(){var t=this;window.onresize=function(){t.pageResize()}},destroyed:function(){window.onresize=null},watch:{tabType:function(){this.updateList()}}},Ft=Ct,Bt=Object(d["a"])(Ft,Dt,Mt,!1,null,"d99e3572",null),Vt=Bt.exports,Ot={name:"PersonalPage",components:{PersonalList:Vt},data:function(){return{user:{avatar:"",username:"",intro:""}}},methods:{showInfo:function(){var t=this;!0===this.$root.hasLogin&&zt.getUserInfo(this.$route.query.userId,(function(e){t.user.avatar=e["avatar"],t.user.username=e["userName"],t.user.intro=e["introduction"]}))}},created:function(){this.showInfo()},computed:{editable:function(){return this.$root.userId!==this.$route.query.userId}}},At=Ot,Ut=(a("d259"),Object(d["a"])(At,St,Pt,!1,null,null,null)),Ht=Ut.exports,Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Scroll",{staticStyle:{"max-width":"480px",margin:"0 0 0 20px","min-width":"460px"},attrs:{height:t.avaiHeight}},[a("card",{staticStyle:{"margin-top":"20px","margin-right":"50px",padding:"5px 0 0 5px","text-align":"left"},attrs:{title:"关于此贴的问答",icon:"md-help"}},t._l(t.qlist,(function(e){return a("CellGroup",{key:e.questionId,staticStyle:{padding:"0 0 10px 0"}},[a("Cell",{attrs:{title:e.content,to:{path:"answer",query:{postingId:t.postingId,questionId:e.questionId}}}},[a("template",{slot:"label"},[t._v(" "+t._s(e.time)+" ")]),a("template",{slot:"icon"},[a("img",{staticStyle:{width:"12px"},attrs:{src:e.avatarDir}}),t._v(" 提问者ID："+t._s(e.questionerId)+" ")])],2)],1)})),1),a("Button",{staticStyle:{margin:"20px auto"},attrs:{type:"primary",loading:t.loadingQlist,icon:"ios-more",shape:"circle"},on:{click:t.toLoadingQlist}},[t.loadingQlist?a("span",[t._v("Loading...")]):a("span",[t._v("加载更多")])]),a("Button",{staticStyle:{margin:"20px"},attrs:{type:"primary",icon:"md-help-buoy",shape:"circle",disabled:!t.ableToQuestion},on:{click:t.question}},[t.ableToQuestion?a("span",[t._v("提问")]):a("span",[t._v("请先登录")])]),a("Modal",{attrs:{title:"提问",loading:t.submitLoading},on:{"on-ok":t.submitQuestion},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Input",{attrs:{maxlength:"200","show-word-limit":"",type:"textarea",placeholder:"描述你的问题"},model:{value:t.questionText,callback:function(e){t.questionText=e},expression:"questionText"}})],1)],1)},Nt=[],Gt="",Jt=_.a.create({baseURL:Gt,headers:{"Content-Type":"application/json"}}),Wt={get:function(t,e,a,n){Jt.request({url:"testData"==Gt?"editSubmit.json":"/submitquestion",method:"GET",params:{postingId:t,content:e,questionerId:a}}).then((function(t){var e=t.data.response;n(e)})).catch((function(t){window.console.log(t)}))}},Kt={name:"Question",data:function(){return{avaiHeight:document.documentElement.clientHeight-60,loadingQlist:!1,qlist:[],questionPage:0,ableToQuestion:this.$root.hasLogin,modal:!1,questionText:"",submitLoading:!1}},methods:{handleReachBottomQlist:function(){var t=this;return new Promise((function(e){setTimeout((function(){tt.get(t.postingId,0,t.questionPage+1,(function(e){for(var a in e.list)t.qlist.push(e.list[a]);t.questionPage+=1})),e(),t.loadingQlist=!1}),10)}))},pageResize:function(){var t=this;this.$nextTick((function(){t.avaiHeight=document.documentElement.clientHeight-60}))},toLoadingQlist:function(){this.loadingQlist=!0,this.handleReachBottomQlist()},question:function(){this.modal=!0},submitQuestion:function(){var t=this;""==this.questionText?this.$Message.error("提问内容不能为空"):(this.submitLoading=!0,window.console.log(this.$root.uesrId),Wt.get(this.postingId,this.questionText,this.$root.userId,(function(e){200===e?(t.$Message.success("提问成功"),t.questionText="",tt.get(t.postingId,0,1,(function(e){t.qlist=e.list,t.questionPage=1}))):t.$Message.error("提问失败"),t.submitLoading=!1})))}},computed:{postingId:function(){return this.$route.query.postingId}},mounted:function(){var t=this;if(null!==window.onresize){var e=window.onresize;window.onresize=function(){e(),t.pageResize()}}else window.onresize=function(){t.pageResize()}},destroyed:function(){window.onresize=null},created:function(){var t=this;tt.get(this.postingId,0,1,(function(e){t.qlist=e.list,t.questionPage=1}))}},Xt=Kt,Yt=(a("a059"),Object(d["a"])(Xt,Qt,Nt,!1,null,"0e0fd55e",null)),Zt=Yt.exports,te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Scroll",{staticStyle:{"max-width":"480px",margin:"0 0 0 20px"},attrs:{height:t.avaiHeight}},[a("card",{staticStyle:{"margin-top":"20px","margin-right":"50px",padding:"5px 0px 0px 20px","text-align":"left"}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("icon",{attrs:{type:"md-happy"}}),t._v(" 问题ID："+t._s(t.questionId)+" ")],1),a("p",{attrs:{slot:"extra"},slot:"extra"},[a("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-arrow-back",to:{path:"question",query:{postingId:t.postingId}}}})],1),a("List",{attrs:{"item-layout":"vertical"}},t._l(t.alist,(function(e){return a("ListItem",{key:e.time,staticStyle:{"text-align":"left"}},[a("ListItemMeta",{attrs:{description:e.time,avatar:e.avatarDir}}),t._v(" "+t._s(e.content)+" ")],1)})),1)],1),a("Button",{staticStyle:{margin:"20px auto"},attrs:{type:"primary",loading:t.loadingQlist,icon:"ios-more",shape:"circle"},on:{click:t.toLoadingQlist}},[t.loadingQlist?a("span",[t._v("Loading...")]):a("span",[t._v("加载更多")])]),a("Button",{staticStyle:{margin:"20px"},attrs:{type:"primary",icon:"md-hand",shape:"circle",disabled:!t.ableToAnswer},on:{click:t.answer}},[t.ableToAnswer?a("span",[t._v("回答")]):a("span",[t._v("请先登录")])]),a("Modal",{attrs:{title:"回答",loading:t.submitLoading},on:{"on-ok":t.submitAnswer},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Input",{attrs:{maxlength:"200","show-word-limit":"",type:"textarea",placeholder:"写下你的答案"},model:{value:t.answerText,callback:function(e){t.answerText=e},expression:"answerText"}})],1)],1)},ee=[],ae="",ne=_.a.create({baseURL:ae,headers:{"Content-Type":"application/json"}}),ie=function(t){return t},se={get:function(t,e,a){ne.request({url:"testData"==ae?"postingAnswer.json":"/posting/answer",method:"GET",params:{questionId:t,answerPage:e}}).then((function(t){var e=t.data.list.map((function(t){return ie(t)}));a(e)})).catch((function(t){window.console.log(t)}))}},oe="",re=_.a.create({baseURL:oe,headers:{"Content-Type":"application/json"}}),le={get:function(t,e,a,n){re.request({url:"testData"==oe?"editSubmit.json":"/submitanswer",method:"GET",params:{questionId:t,content:e,answererId:a}}).then((function(t){var e=t.data.response;n(e)})).catch((function(t){window.console.log(t)}))}},ue={name:"Answer",data:function(){return{avaiHeight:document.documentElement.clientHeight-60,loadingQlist:!1,alist:[],answerPage:0,ableToAnswer:this.$root.hasLogin,modal:!1,answerText:"",submitLoading:!1}},methods:{handleReachBottomQlist:function(){var t=this;return new Promise((function(e){setTimeout((function(){se.get(t.questionId,t.answerPage+1,(function(e){for(var a in e)t.alist.push(e[a]);t.answerPage+=1})),e(),t.loadingQlist=!1}),10)}))},pageResize:function(){var t=this;this.$nextTick((function(){t.avaiHeight=document.documentElement.clientHeight-60}))},toLoadingQlist:function(){this.loadingQlist=!0,this.handleReachBottomQlist()},back:function(){this.$router.push({path:"question",query:{postingId:this.postingId}})},answer:function(){this.modal=!0},submitAnswer:function(){var t=this;""==this.answerText?this.$Message.error("回答内容不能为空"):(this.submitLoading=!0,le.get(this.questionId,this.answerText,this.$root.userId,(function(e){200===e?(t.$Message.success("回答成功"),t.answerText=""):t.$Message.error("提交失败"),t.submitLoading=!1})))}},computed:{questionId:function(){return this.$route.query.questionId},postingId:function(){return this.$route.query.postingId}},mounted:function(){var t=this;if(null!==window.onresize){var e=window.onresize;window.onresize=function(){e(),t.pageResize()}}else window.onresize=function(){t.pageResize()}},destroyed:function(){window.onresize=null},created:function(){var t=this;se.get(this.questionId,1,(function(e){t.alist=e,t.answerPage=1}))}},ce=ue,pe=Object(d["a"])(ce,te,ee,!1,null,"5c0b68ed",null),de=pe.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"800px",margin:"20px auto 0 auto",padding:"20px 20px",background:"snow"}},[a("div",{staticStyle:{display:"flex"}},[a("Button",{attrs:{type:"dashed",to:{path:"/personalPage",query:{userId:this.$root.userId}}}},[a("Icon",{attrs:{type:"ios-arrow-back"}}),t._v(" Backward ")],1)],1),a("div",{staticStyle:{width:"500px",margin:"50px auto 0 auto"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"",prop:"avatar"}},[a("avatar",{staticStyle:{float:"left"},attrs:{src:t.formValidate.avatar,size:"80"}}),a("div",[a("Button",{staticStyle:{margin:"25px 140px 0 0"},attrs:{icon:"ios-camera"},on:{click:function(e){return e.stopPropagation(),t.uploadHeadImg(e)}}},[t._v("更换头像")]),a("input",{staticClass:"hiddenInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.handleFile}})],1)],1),a("FormItem",{attrs:{label:"昵称",prop:"name"}},[a("Input",{attrs:{placeholder:"Enter your name"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),a("FormItem",{attrs:{label:"邮箱",prop:"mail"}},[a("Input",{attrs:{placeholder:"Enter your e-mail"},model:{value:t.formValidate.mail,callback:function(e){t.$set(t.formValidate,"mail",e)},expression:"formValidate.mail"}})],1),a("FormItem",{attrs:{label:"性别",prop:"gender"}},[a("RadioGroup",{staticStyle:{display:"flex"},model:{value:t.formValidate.gender,callback:function(e){t.$set(t.formValidate,"gender",e)},expression:"formValidate.gender"}},[a("Radio",{attrs:{label:"男"}},[t._v("男")]),a("Radio",{attrs:{label:"女"}},[t._v("女")])],1)],1),a("FormItem",{attrs:{label:"简介",prop:"desc"}},[a("Input",{attrs:{type:"textarea",autosize:{maxRows:5},placeholder:"Enter something to introduce yourself"},model:{value:t.formValidate.desc,callback:function(e){t.$set(t.formValidate,"desc",e)},expression:"formValidate.desc"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("Submit")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("Reset")])],1)],1)],1)])},he=[],me={name:"ChangeInfo",data:function(){return{formValidate:{avatar:"",name:"",mail:"",gender:"",desc:"",avaName:""},ruleValidate:{name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],mail:[{required:!0,message:"Mailbox cannot be empty",trigger:"blur"},{type:"email",message:"Incorrect email format",trigger:"blur"}],city:[{required:!0,message:"Please select the city",trigger:"change"}],gender:[{required:!0,message:"Please select gender",trigger:"change"}],interest:[{required:!0,type:"array",min:1,message:"Choose at least one hobby",trigger:"change"},{type:"array",max:2,message:"Choose two hobbies at best",trigger:"change"}],date:[{required:!0,type:"date",message:"Please select the date",trigger:"change"}],time:[{required:!0,type:"string",message:"Please select time",trigger:"change"}],desc:[{required:!0,message:"Please enter a personal introduction",trigger:"blur"},{type:"string",min:10,message:"Introduce no less than 20 words",trigger:"blur"}]}}},methods:{showForm:function(t){var e=this;zt.getUserInfo(t,(function(t){e.formValidate.avatar=t["avatar"],e.formValidate.name=t["userName"],e.formValidate.mail=t["email"],e.formValidate.desc=t["introduction"],0===t["gender"]?e.formValidate.gender="男":e.formValidate.gender="女"}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(t){if("男"===e.formValidate.gender)var a=0;else a=1;zt.changeUserInfo(e.$root.userId,e.formValidate.avaName,e.formValidate.name,a,e.formValidate.mail,e.formValidate.desc,(function(t){0===t["isSuccess"]?e.$Message.success("修改成功!"):e.$Message.error("修改失败，请重新提交！")}))}else e.$Message.error("信息格式不正确!")}))},handleReset:function(t){this.$refs[t].resetFields()},uploadHeadImg:function(){this.$el.querySelector(".hiddenInput").click()},handleFile:function(t){var e=this,a=t.target||t.srcElement,n=a.files[0],i=new FileReader;i.fileName=n.name,i.onload=function(t){var a=t.target||t.srcElement;e.formValidate.avatar=a.result,e.formValidate.avaName=t.target.fileName},i.readAsDataURL(n)}},created:function(){!0===this.$root.hasLogin&&this.showForm(this.$root.userId)}},fe=me,ye=Object(d["a"])(fe,ge,he,!1,null,null,null),ve=ye.exports,be=a("2b27"),xe=a.n(be),Ie={template:"<p>Page not found</p>"},we=[{path:"/",component:v,redirect:"index",children:[{path:"index",component:W},{path:"edit",component:E},{path:"posting",component:ct,redirect:"posting/question",children:[{path:"question",component:Zt},{path:"answer",component:de}]},{path:"login",component:bt},{path:"register",component:Lt},{path:"personalPage",component:Ht,redirect:"personalPage/personalList",children:[{path:"personalList",component:Vt}]},{path:"changeInfo",component:ve},{path:"search",component:W}]},{path:"*",component:Ie}],$e=new s["a"]({routes:we}),Te=s["a"].prototype.push;s["a"].prototype.push=function(t,e,a){return e||a?Te.call(this,t,e,a):Te.call(this,t).catch((function(t){return t}))},i.a.config.productionTip=!1,i.a.use(x.a,{}),i.a.use(s["a"]),i.a.use(xe.a),new i.a({router:$e,data:function(){return{hasLogin:!1,userId:-1}}}).$mount("#app")},7174:function(t,e,a){},"85ec":function(t,e,a){},a059:function(t,e,a){"use strict";var n=a("552d"),i=a.n(n);i.a},d259:function(t,e,a){"use strict";var n=a("2258"),i=a.n(n);i.a},f30e:function(t,e,a){"use strict";var n=a("0ea0"),i=a.n(n);i.a}});
//# sourceMappingURL=app.400a09cd.js.map