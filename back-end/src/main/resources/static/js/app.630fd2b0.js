(function(t){function e(e){for(var i,s,r=e[0],l=e[1],u=e[2],p=0,d=[];p<r.length;p++)s=r[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var l=n[r];0!==a[l]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},o=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var c=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("85ec"),a=n.n(i);a.a},"039a":function(t,e,n){"use strict";var i=n("7174"),a=n.n(i);a.a},"0ea0":function(t,e,n){},1515:function(t,e,n){t.exports=n.p+"img/3.a4d8d3e4.jpg"},1965:function(t,e,n){t.exports=n.p+"img/5.b4ac7800.jpg"},"219e":function(t,e,n){t.exports=n.p+"img/7.c95823ec.jpg"},2258:function(t,e,n){},"2bba":function(t,e,n){t.exports=n.p+"img/13.4e002f16.jpg"},"34db":function(t,e,n){t.exports=n.p+"img/10.be7c6d89.jpg"},"38de":function(t,e,n){t.exports=n.p+"img/14.d554fc9a.jpg"},"39c6":function(t,e,n){t.exports=n.p+"img/10.f03e250e.jpg"},"3d27":function(t,e,n){t.exports=n.p+"img/7.32924d6c.jpg"},"42c9":function(t,e,n){t.exports=n.p+"img/8.f8286642.jpg"},"42ff":function(t,e,n){t.exports=n.p+"img/14.a58c247a.jpg"},"4d74":function(t,e,n){t.exports=n.p+"img/4.592c616d.jpg"},"52f0":function(t,e,n){t.exports=n.p+"img/1.916c57ad.jpg"},5447:function(t,e,n){t.exports=n.p+"img/5.684fe3de.jpg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("ba4c"),a=n.n(i),o=n("8c4f"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("NaviBar"),n("router-view")],1)},r=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{position:"relative","z-index":"1"}},[n("Menu",{ref:"menu",attrs:{mode:"horizontal",theme:t.theme,"active-name":t.active},on:{"on-select":t.outFocus}},[n("MenuItem",{attrs:{name:"index",to:"/index"}},[t._v(" WESHARE ")]),n("MenuItem",{attrs:{name:"edit",to:"/edit"}},[n("Icon",{attrs:{type:"md-paper"}}),t._v(" 发布新帖 ")],1),n("MenuItem",{staticStyle:{width:"30%"},attrs:{name:"search"}},[n("i-input",{staticStyle:{"margin-top":"14px"},on:{"on-enter":t.search},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},[n("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},[n("Option",{attrs:{value:"posting"}},[t._v("帖子")]),n("Option",{attrs:{value:"topic"}},[t._v("话题")]),n("Option",{attrs:{value:"user"}},[t._v("用户")])],1),n("Button",{attrs:{slot:"append",icon:"md-search"},on:{click:t.search},slot:"append"})],1)],1),n("MenuItem",{staticStyle:{float:"right"},attrs:{name:"login"}},[n("Submenu",{attrs:{name:"login"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"md-person"}}),t._v(" 登录/注册 ")],1),n("MenuGroup",{attrs:{title:"用户账户"}},[n("MenuItem",{attrs:{name:"login",to:"/login"}},[t._v(" 登录 ")]),n("MenuItem",{attrs:{name:"register",to:"/register"}},[t._v(" 注册 ")])],1)],2)],1)],1)],1)},u=[],c=(n("1276"),{name:"NaviBar",data:function(){return{theme:"light",searchType:"posting",searchTextData:"",active:"logo"}},computed:{searchText:{get:function(){return void 0!==this.$route.query.text?"postingbytag"==this.$route.query.type?"话题："+this.$route.query.text:this.$route.query.text:""!==this.searchTextData?this.searchTextData:""},set:function(t){this.searchTextData=t}}},methods:{search:function(){""!==this.searchTextData&&void 0!==this.searchTextData?this.$router.push({path:"/search",query:{type:this.searchType,text:this.searchTextData}}):void 0!==this.searchText&&""!==this.searchText&&this.$router.push({path:"/search",query:{type:this.searchType,text:this.searchText}})},outFocus:function(t){var e=this;this.$nextTick((function(){e.active=e.$route.path.substr(1).split("/")[0],e.$refs.menu.updateActiveName(),"search"===t&&"search"!==e.$route.path.substr(1).split("/")[0]&&(e.active="logo",e.$refs.menu.updateActiveName())}))}},mounted:function(){var t=this;this.$nextTick((function(){t.active=t.$route.path.substr(1).split("/")[0],t.$refs.menu.updateActiveName()}))},watch:{$route:function(){this.outFocus()}}}),p=c,d=n("2877"),g=Object(d["a"])(p,l,u,!1,null,"bbd37cb8",null),m=g.exports,h={name:"app",components:{NaviBar:m}},f=h,y=(n("034f"),Object(d["a"])(f,s,r,!1,null,null,null)),v=y.exports,b=n("f825"),x=n.n(b),w=(n("f8ce"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{position:"relative","z-index":"0"}},[n("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[n("FormItem",{staticStyle:{margin:"30px 0 0 30px",display:"flex","justify-content":"left"},attrs:{prop:"title"}},[n("i-input",{staticStyle:{width:"600px"},attrs:{type:"text",placeholder:t.titleInputText,disabled:t.ifAppend},model:{value:t.formInline.title,callback:function(e){t.$set(t.formInline,"title",e)},expression:"formInline.title"}},[n("Icon",{attrs:{slot:"prepend",type:"md-text"},slot:"prepend"})],1)],1),n("FormItem",{staticStyle:{display:"flex","justify-content":"left",margin:"30px 0 0 30px"},attrs:{prop:"tagAry"}},[n("div",{staticStyle:{display:"flex","justify-content":"left","align-content":"center"}},[t._l(t.tags,(function(e){return n("Tag",{key:e,attrs:{type:"dot",closable:"",color:"primary",name:e},on:{"on-close":t.handleClose}},[t._v(" "+t._s(e)+" ")])})),n("i-input",{staticStyle:{width:"200px",margin:"1px"},attrs:{disabled:t.ifAppend},on:{"on-enter":t.handleAdd},model:{value:t.newTagText,callback:function(e){t.newTagText=e},expression:"newTagText"}},[n("Button",{attrs:{slot:"append",icon:"ios-add",type:"dashed",size:"small",disabled:t.ifAppend},on:{click:t.handleAdd},slot:"append"},[t._v(" "+t._s(t.addTagText)+" ")])],1)],2)]),n("div",{staticClass:"markdown",staticStyle:{margin:"30px 30px 0 30px",position:"relative","z-index":"0"}},[n("div",{staticClass:"container"},[n("mavon-editor",{ref:"md",staticStyle:{"min-height":"500px"},attrs:{toolbars:t.toolbars},on:{imgAdd:t.$imgAdd,imgDel:t.$imgDel,change:t.change},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)]),n("FormItem",[n("Button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",loading:t.loading,shape:"circle",icon:"md-checkbox"},on:{click:function(e){return t.handleSubmit("formInline")}}},[t._v(" 提交 ")])],1)],1)],1)}),I=[],T=(n("a434"),n("b2d8")),$=(n("64e1"),n("bc3a")),_=n.n($),q="",j=_.a.create({baseURL:q,headers:{"Content-Type":"application/json"}}),k={get:function(t,e,n,i,a){j.request({url:"testData"==q?"editSubmit.json":"/edit",method:"GET",params:{title:t,topics:e,content:n,posterId:i}}).then((function(t){var e=t.data.response;a(e)})).catch((function(t){window.console.log(t)}))}},L="",S=_.a.create({baseURL:L,headers:{"Content-Type":"application/json"}}),D={get:function(t,e,n){S.request({url:"testData"==L?"editSubmit.json":"/edit",method:"GET",data:{postingId:t,content:e}}).then((function(t){var e=t.data.response;n(e)})).catch((function(t){window.console.log(t)}))}},P={name:"Edit",props:[],data:function(){return{string:"",minRows:{minRows:25},content:"",html:"",configs:{},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!1,undo:!0,redo:!0,trash:!1,save:!1,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},loading:!1,tags:[],newTagText:"",formInline:{title:"",tagAry:[]},userId:-1}},components:{mavonEditor:T["mavonEditor"]},computed:{ifAppend:function(){return void 0!==this.$route.query.postingId},addTagText:function(){return void 0!==this.$route.query.postingId?"盖楼无需添加话题":"添加话题"},titleInputText:function(){return void 0!==this.$route.query.postingId?"盖楼无需添加标题":"标题"},ruleInline:function(){return void 0!==this.$route.query.postingId?{}:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],tagAry:[{required:!0,type:"array",min:1,message:"最少需要1个话题",trigger:"blur, change"},{type:"array",max:5,message:"话题须少于5个",trigger:"blur, change"}]}}},methods:{$imgAdd:function(t,e){var n=this,i=new FormData;i.append("image",e),{url:"server url",method:"post",data:i,headers:{"Content-Type":"multipart/form-data"}}.then((function(e){n.$vm.$img2Url(t,e)}))},$imgDel:function(t){window.console.log(t)},change:function(t,e){this.html=e},submit:function(){var t=this;this.loading=!0,void 0!==this.$route.query.postingId?D.get(this.$route.query.postingId,this.content,(function(e){200==e&&(t.loading=!1)})):k.get(this.formInline.title,this.tags,this.content,this.$root.userId,(function(e){200==e&&(t.loading=!1)}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?e.submit():e.$Message.error("请检查各项内容")}))},handleAdd:function(){if(this.tags.length>=5)this.$Message["warning"]({background:!0,content:"话题须少于5个"});else if(void 0!==this.newTagText&&""!==this.newTagText){for(this.key in this.tags)if(this.tags[this.key]===this.newTagText)return void this.$Message["warning"]({background:!0,content:"话题已存在"});this.tags.push(this.newTagText),this.formInline.tagAry.push(""),this.newTagText=""}else this.$Message["warning"]({background:!0,content:"话题内容不能为空"})},handleClose:function(t,e){for(this.key in this.tags)if(this.tags[this.key]===e)return this.tags.splice(this.key,1),void this.formInline.tagAry.pop()}},mounted:function(){var t=this;!1===this.$root.hasLogin&&this.$nextTick((function(){t.$Message.error("请先登录"),t.$router.push({path:"login"})}))}},M=P,R=Object(d["a"])(M,w,I,!1,null,"1b2fa0d7",null),E=R.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Scroll",{staticStyle:{position:"relative","z-index":"0"},attrs:{height:t.avaiHeight}},[n("card",{staticStyle:{"max-width":"1200px",margin:"20px auto 0 auto",padding:"0 20px"}},[n("Tabs",{attrs:{animated:!1},model:{value:t.tabType,callback:function(e){t.tabType=e},expression:"tabType"}},[n("TabPane",{attrs:{label:t.popularPosting,disabled:t.postingTab,name:"posting"}},[n("List",{attrs:{"item-layout":"vertical"}},t._l(t.list,(function(e){return n("ListItem",{key:e.postingId,staticStyle:{"text-align":"left"}},[n("ListItemMeta",{attrs:{avatar:e.avatar}},[n("template",{slot:"description"},t._l(e.topic,(function(e){return n("router-link",{key:e.tagId,attrs:{to:{path:"/search",query:{type:"postingbytag",text:e.tagId}}}},[n("tag",{attrs:{color:"blue"}},[t._v(" "+t._s(e.tagName)+" ")])],1)})),1),n("template",{slot:"title"},[n("router-link",{attrs:{to:{path:"posting",query:{postingId:e.postingId}}}},[t._v(" "+t._s(e.title)+" ")])],1)],2),t._v(" "+t._s(e.content)+" "),n("template",{slot:"action"},[n("li",[n("Icon",{attrs:{type:"md-information-circle"}}),t._v(" 帖子ID "+t._s(e.postingId)+" ")],1),n("li",[n("Icon",{attrs:{type:"md-eye"}}),t._v(" 浏览量 "+t._s(e.views)+" ")],1),n("li",[n("Icon",{attrs:{type:"md-star"}}),t._v(" 收藏量 "+t._s(e.stars)+" ")],1)]),n("template",{staticStyle:{"max-height":"fit-content"},slot:"extra"},[n("img",{staticStyle:{"max-height":"200px"},attrs:{src:e.pic}})])],2)})),1)],1),n("TabPane",{attrs:{label:t.popularTopic,disabled:t.topicTab,name:"topic"}},[n("div",{staticStyle:{"text-align":"left"}},t._l(t.tlist,(function(t){return n("CellGroup",{key:t.tagId,staticStyle:{padding:"5px"}},[n("Cell",{attrs:{title:t.tagName,extra:"搜索该话题下的帖子",to:{path:"/search",query:{type:"postingbytag",text:t.tagId}}}},[n("template",{slot:"label"})],2)],1)})),1)]),n("TabPane",{attrs:{label:t.popularUser,disabled:t.userTab,name:"user"}},[n("div",{staticStyle:{"text-align":"left"}},t._l(t.ulist,(function(e){return n("CellGroup",{key:e.userId,staticStyle:{padding:"5px"}},[n("Cell",{attrs:{to:{path:"/personalpage",query:{userid:e.userId}}}},[n("avatar",{attrs:{src:e.avatar}}),[t._v(" "+t._s(e.userName)+" ")],n("template",{slot:"label"},[t._v(" 用户ID: "+t._s(e.userId)+" ")])],2)],1)})),1)])],1)],1),n("Button",{staticStyle:{margin:"20px auto"},attrs:{type:"primary",loading:t.loading,icon:"ios-more",shape:"circle"},on:{click:t.toLoading}},[t.loading?n("span",[t._v("Loading...")]):n("span",[t._v("加载更多")])])],1)},C=[],F=(n("d3b7"),n("d81d"),""),B=_.a.create({baseURL:F,headers:{"Content-Type":"application/json"}}),V=function(t){return t},O={get:function(t,e,n){B.request({url:"testData"==F?"posting"==t?"/popPosting.json":"/popTopic.json":"/index",method:"GET",params:{type:t,page:e}}).then((function(t){var e=t.data.list.map((function(t){return V(t)}));n(e)})).catch((function(t){window.console.log(t)}))}},U="",A=_.a.create({baseURL:U,headers:{"Content-Type":"application/json"}}),H=function(t){return t},Q={get:function(t,e,n,i){A.request({url:"testData"==U?"posting"==t||"postingbytag"==t?"/searchPosting.json":"topic"==t?"/searchTopic.json":"/searchUser.json":"/search",method:"GET",params:{type:t,text:e,page:n}}).then((function(t){var e=t.data.list.map((function(t){return H(t)}));i(e)})).catch((function(t){window.console.log(t)}))}},G={name:"ItemList",data:function(){return{avaiHeight:document.documentElement.clientHeight-60,loading:!1,tabTypeData:"",list:[],tlist:[],ulist:[],curPage:0}},computed:{tabType:{get:function(){return this.pageResize(),"postingbytag"===this.$route.query.type||"postingbytag"===this.tabTypeData?"posting":void 0!==this.$route.query.type?this.$route.query.type:""!==this.tabTypeData&&"user"!==this.tabTypeData?this.tabTypeData:"posting"},set:function(t){this.tabTypeData=t}},postingTab:function(){return"posting"!==this.$route.query.type&&void 0!==this.$route.query.type&&"postingbytag"!==this.$route.query.type},topicTab:function(){return"topic"!==this.$route.query.type&&void 0!==this.$route.query.type},userTab:function(){return"user"!==this.$route.query.type},popularPosting:function(){return void 0===this.$route.query.type?"热门帖子":"postingbytag"===this.$route.query.type?"话题下帖子的搜索结果":"帖子的搜索结果"},popularTopic:function(){return void 0===this.$route.query.type?"热门话题":"话题的搜索结果"},popularUser:function(){return void 0===this.$route.query.type?"热门用户":"用户的搜索结果"}},methods:{handleReachBottom:function(){var t=this;return new Promise((function(e){setTimeout((function(){void 0===t.$route.query.type?O.get(t.tabType,t.curPage+1,(function(e){if("posting"===t.tabType)for(var n in e)t.list.push(e[n]);else for(var i in e)t.tlist.push(e[i]);t.curPage+=1})):Q.get(t.$route.query.type,t.$route.query.text,t.curPage+1,(function(e){if("topic"===t.tabType)for(var n in e)t.tlist.push(e[n]);else if("user"===t.tabType)for(var i in e)t.ulist.push(e[i]);else for(var a in e)t.list.push(e[a]);t.curPage+=1})),e(),t.loading=!1}),10)}))},pageResize:function(){var t=this;this.$nextTick((function(){t.avaiHeight=document.documentElement.clientHeight-60}))},toLoading:function(){this.loading=!0,this.handleReachBottom()},updateList:function(){var t=this;this.list=void 0,this.tlist=void 0,this.ulist=void 0,"index"===this.$route.path.substr(1).split("/")[0]?(O.get("posting","1",(function(e){t.list=e})),O.get("topic","1",(function(e){t.tlist=e}))):Q.get(this.$route.query.type,this.$route.query.text,1,(function(e){"posting"===t.$route.query.type||void 0===t.$route.query.type||"postingbytag"===t.$route.query.type?t.list=e:"topic"===t.$route.query.type||void 0===t.$route.query.type?t.tlist=e:"user"===t.$route.query.type&&(t.ulist=e)})),this.curPage=1}},created:function(){this.updateList()},mounted:function(){var t=this;window.onresize=function(){t.pageResize()}},destroyed:function(){window.onresize=null},watch:{$route:function(){this.updateList()}}},N=G,J=Object(d["a"])(N,z,C,!1,null,"56113fbd",null),W=J.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("div",{attrs:{dir:"rtl"}},[n("Scroll",{staticStyle:{"max-width":"1200px",margin:"0 20px 0 0"},attrs:{height:t.avaiHeight}},[n("div",{attrs:{dir:"ltr"}},[n("card",{staticStyle:{"margin-top":"20px","margin-left":"50px",padding:"0 20px"}},[n("List",{attrs:{"item-layout":"vertical"}},[n("ListItem",{key:t.postingId,staticStyle:{"text-align":"left",display:"flex"}},[n("ListItemMeta",{attrs:{avatar:t.posting.avatar,title:t.posting.title}},[t._l(t.posting.topic,(function(e){return n("template",{slot:"description"},[t._v(" "+t._s(e)+" ")])}))],2),n("template",{slot:"action"},[n("li",{on:{click:t.follow}},[n("Icon",{attrs:{type:"md-add"}}),t._v(" 关注用户 ")],1),n("li",{on:{click:t.star}},[n("Icon",{attrs:{type:"md-star"}}),t._v(" 收藏帖子 ")],1)])],2),t._l(t.list,(function(e){return n("ListItem",{key:e.time,staticStyle:{"text-align":"left"}},[n("ListItemMeta",{attrs:{description:e.time}}),t._v(" "+t._s(e.content)+" "),n("template",{staticStyle:{"max-height":"fit-content"},slot:"extra"},[n("img",{staticStyle:{"max-height":"200px"},attrs:{src:e.pic}})])],2)}))],2)],1),n("Button",{staticStyle:{margin:"20px auto"},attrs:{type:"primary",loading:t.loading,icon:"ios-more",shape:"circle"},on:{click:t.toLoading}},[t.loading?n("span",[t._v("Loading...")]):n("span",[t._v("加载更多")])]),n("Button",{staticStyle:{margin:"20px"},attrs:{type:"primary",icon:"md-hammer",shape:"circle",disabled:!t.ableToAppend},on:{click:t.append}},[t.ableToAppend?n("span",[t._v("盖楼")]):n("span",[t._v("只有贴主才可以盖楼")])])],1)])],1),n("router-view")],1)},X=[],Y="",Z=_.a.create({baseURL:Y,headers:{"Content-Type":"application/json"}}),tt={get:function(t,e,n,i){Z.request({url:"testData"==Y?0!==e?"/postingContent.json":"/postingQuestion.json":"/posting/question",method:"GET",params:{postingId:t,postingPage:e,questionPage:n}}).then((function(t){var e=t.data;i(e)})).catch((function(t){window.console.log(t)}))}},et="",nt=_.a.create({baseURL:et,headers:{"Content-Type":"application/json"}}),it={get:function(t,e,n){nt.request({url:"testData"==et?"editSubmit.json":"/follow",method:"GET",params:{followedId:t,followerId:e}}).then((function(t){var e=t.data.response;n(e)})).catch((function(t){window.console.log(t)}))}},at="",ot=_.a.create({baseURL:at,headers:{"Content-Type":"application/json"}}),st={get:function(t,e,n){ot.request({url:"testData"==at?"editSubmit.json":"/star",method:"GET",params:{postingId:t,userId:e}}).then((function(t){var e=t.data.response;n(e)})).catch((function(t){window.console.log(t)}))}},rt={name:"Posting",data:function(){return{avaiHeight:document.documentElement.clientHeight-60,loading:!1,posting:[],list:[],postingPage:0}},computed:{postingId:function(){return this.$route.query.postingId},ableToAppend:function(){return!(!this.$root.hasLogin||this.$root.userId!==this.posting.posterId)}},methods:{handleReachBottom:function(){var t=this;return new Promise((function(e){setTimeout((function(){tt.get(t.postingId,t.postingPage+1,0,(function(e){for(var n in e.list)t.list.push(e.list[n]);t.postingPage+=1})),e(),t.loading=!1}),10)}))},pageResize:function(){var t=this;this.$nextTick((function(){t.avaiHeight=document.documentElement.clientHeight-60}))},toLoading:function(){this.loading=!0,this.handleReachBottom()},append:function(){this.$router.push({path:"/edit",query:{postingId:this.postingId}})},follow:function(){var t=this;!0!==this.$root.hasLogin?this.$Message.warning("需要登录"):this.$root.userId===this.posting.posterId?this.$Message.warning("不能关注自己"):it.get(this.posting.posterId,this.$root.userId,(function(e){200===e?t.$Message.success("关注成功"):t.$Message.warning("已在关注列表")}))},star:function(){var t=this;!0!==this.$root.hasLogin?this.$Message.warning("需要登录"):this.$root.userId===this.posting.posterId?this.$Message.warning("不能关注自己的帖子"):st.get(this.posting.postingId,this.$root.userId,(function(e){200===e?t.$Message.success("收藏成功"):t.$Message.warning("已在收藏列表")}))}},mounted:function(){var t=this;if(null!==window.onresize){var e=window.onresize;window.onresize=function(){e(),t.pageResize()}}else window.onresize=function(){t.pageResize()}},destroyed:function(){window.onresize=null},created:function(){var t=this;tt.get(this.postingId,1,0,(function(e){t.list=e.list,t.posting=e.posting,t.postingPage=1}))}},lt=rt,ut=Object(d["a"])(lt,K,X,!1,null,"2a7b31f6",null),ct=ut.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"from-wrap"},[n("h2",[t._v("登录")]),n("Form",{ref:"loginData",attrs:{model:t.loginData,rules:t.ruleValidate,"label-width":80}},[n("FormItem",{attrs:{label:"Email",prop:"account"}},[n("Input",{attrs:{type:"email",placeholder:"请输入账号"},model:{value:t.loginData.account,callback:function(e){t.$set(t.loginData,"account",e)},expression:"loginData.account"}})],1),n("FormItem",{attrs:{label:"Password",prop:"password"}},[n("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.loginData.password,callback:function(e){t.$set(t.loginData,"password",e)},expression:"loginData.password"}})],1),n("FormItem",{staticClass:"form-footer"},[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("loginData")}}},[t._v("Submit")]),n("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("loginData")}}},[t._v("Reset")])],1),n("router-link",{attrs:{to:"register"}},[t._v("没有账户？注册一个")])],1)],1)])},dt=[],gt="",mt=_.a.create({baseURL:gt,headers:{"Content-Type":"application/json"}}),ht={get:function(t,e,n){mt.request({url:"testData"==gt?"/loginUser.json":"/login",method:"GET",params:{email:t,password:e}}).then((function(t){var e=t.data;n(e)})).catch((function(t){window.console.log(t)}))}},ft={name:"Login",data:function(){return{loginData:{account:"",password:""},ruleValidate:{account:[{required:!0,message:"账号不能为空",trigger:"blur"},{type:"email",message:"邮箱格式错误",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,max:16,message:"密码长度6-16个字符",trigger:"blur"}]}}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?ht.get(e.loginData.account,e.loginData.password,(function(t){0===t["isSuccess"]?(e.$Message.success("登录成功!"),e.$root.hasLogin=!0,e.$root.userId=t["userId"],e.$router.push({path:"index"})):e.$Message.error("登录失败，账户或密码错误!")})):e.$Message.error("输入信息格式错误!")}))},handleReset:function(t){this.$refs[t].resetFields()}}},yt=ft,vt=(n("039a"),Object(d["a"])(yt,pt,dt,!1,null,null,null)),bt=vt.exports,xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"register"},[n("div",{staticClass:"from-wrap"},[n("h2",[t._v("注册")]),n("Form",{ref:"registerData",attrs:{model:t.registerData,rules:t.ruleValidate,"label-width":80}},[n("FormItem",{attrs:{label:"Email",prop:"account"}},[n("label",[n("Input",{attrs:{type:"email",placeholder:"请输入账号"},model:{value:t.registerData.account,callback:function(e){t.$set(t.registerData,"account",e)},expression:"registerData.account"}})],1)]),n("FormItem",{attrs:{label:"Name",prop:"name"}},[n("label",[n("Input",{attrs:{type:"text",placeholder:"请输入昵称"},model:{value:t.registerData.name,callback:function(e){t.$set(t.registerData,"name",e)},expression:"registerData.name"}})],1)]),n("FormItem",{attrs:{label:"Password",prop:"password"}},[n("label",[n("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.registerData.password,callback:function(e){t.$set(t.registerData,"password",e)},expression:"registerData.password"}})],1)]),n("FormItem",{staticClass:"form-footer"},[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("registerData")}}},[t._v("Submit")]),n("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("registerData")}}},[t._v("Reset")])],1)],1),n("router-link",{attrs:{to:"login"}},[t._v("已有账户？去登录")])],1)])},wt=[],It=(n("b0c0"),""),Tt=_.a.create({baseURL:It,headers:{"Content-Type":"application/json"}}),$t={get:function(t,e,n,i){Tt.request({url:"testData"==It?"/register.json":"/register",method:"GET",params:{email:t,userName:e,password:n}}).then((function(t){var e=t.data;i(e)})).catch((function(t){window.console.log(t)}))}},_t={name:"Register",data:function(){return{registerData:{account:"",name:"",password:""},ruleValidate:{account:[{required:!0,message:"账号不能为空",trigger:"blur"},{type:"email",message:"邮箱格式错误",trigger:"blur"}],name:[{required:!0,message:"昵称不可为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,max:16,message:"密码长度6-16个字符",trigger:"blur"}]}}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?$t.get(e.registerData.account,e.registerData.name,e.registerData.password,(function(t){0===t["isSuccess"]?(e.$Message.success("登录成功!"),e.$root.hasLogin=!0,e.$root.userId=t["userId"],e.$router.push({path:"index"})):e.$Message.error("该邮箱已被注册！")})):e.$Message.error("输入信息格式错误!")}))},handleReset:function(t){this.$refs[t].resetFields()}}},qt=_t,jt=(n("f30e"),Object(d["a"])(qt,xt,wt,!1,null,null,null)),kt=jt.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",t._b({attrs:{id:"upper"}},"div",t.user,!1),[n("div",{staticStyle:{"margin-left":"20px"}},[n("avatar",{attrs:{src:t.user.avatar,size:"150"}})],1),n("div",{attrs:{id:"right"}},[n("div",{staticStyle:{"margin-top":"40px"}},[n("h1",[t._v(t._s(t.user.username))])]),n("Tooltip",{attrs:{"max-width":"300",content:t.user.intro}},[n("div",{staticClass:"text"},[n("Icon",{attrs:{type:"ios-card",size:"24"}}),t._v(" "+t._s(t.user.intro)+" ")],1)])],1),n("div",{staticStyle:{"margin-top":"110px","margin-left":"240px"}},[n("Button",{attrs:{type:"primary",ghost:"",to:"/changeInfo"}},[t._v("编辑个人资料")])],1)]),n("div",[n("personal-list")],1)])},St=[],Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("card",{staticStyle:{"max-width":"1000px",margin:"20px auto 0 auto",padding:"0 20px"}},[n("Tabs",{model:{value:t.tabType,callback:function(e){t.tabType=e},expression:"tabType"}},[n("TabPane",{attrs:{label:"我的收藏",disabled:t.postingTab,name:"posting"}},[n("List",{attrs:{"item-layout":"vertical"}},t._l(t.favoriteList,(function(e){return n("ListItem",{key:e.postingId,staticStyle:{"text-align":"left"}},[n("ListItemMeta",{attrs:{avatar:e.avatar}},[n("template",{slot:"description"},t._l(e.topic,(function(e){return n("router-link",{key:e.id,attrs:{to:{path:"/search",query:{type:"postingbytag",text:e.id}}}},[n("tag",{attrs:{color:"blue"}},[t._v(" "+t._s(e.name)+" ")])],1)})),1),n("template",{slot:"title"},[n("router-link",{attrs:{to:{path:"/posting",query:{postingId:e.postingId}}}},[t._v(" "+t._s(e.title)+" ")])],1)],2),t._v(" "+t._s(e.content)+" "),n("template",{slot:"action"},[n("li",[n("Icon",{attrs:{type:"md-information-circle"}}),t._v(" 帖子ID "+t._s(e.postingId)+" ")],1),n("li",[n("Icon",{attrs:{type:"md-eye"}}),t._v(" 浏览量 "+t._s(e.views)+" ")],1),n("li",[n("Icon",{attrs:{type:"md-star"}}),t._v(" 收藏量 "+t._s(e.stars)+" ")],1)]),n("template",{staticStyle:{"max-height":"fit-content"},slot:"extra"},[n("img",{staticStyle:{"max-height":"200px"},attrs:{src:e.pic}})])],2)})),1)],1),n("TabPane",{attrs:{label:"我的帖子",disabled:t.topicTab,name:"topic"}},[n("List",t._l(t.postList,(function(e){return n("ListItem",{key:e.postingId,staticStyle:{"text-align":"left"}},[n("ListItemMeta",{attrs:{avatar:""}},[n("template",{slot:"description"},t._l(e.topic,(function(e){return n("router-link",{key:e.id,attrs:{to:{path:"/search",query:{type:"postingbytag",text:e.id}}}},[n("tag",{attrs:{color:"blue"}},[t._v(" "+t._s(e.name)+" ")])],1)})),1),n("template",{slot:"title"},[n("router-link",{attrs:{to:{path:"/posting",query:{postingId:e.postingId}}}},[t._v(" "+t._s(e.title)+" ")])],1)],2),n("template",{slot:"action"},[n("li",[n("Icon",{attrs:{type:"ios-eye-outline"}}),t._v(" 浏览量 "+t._s(e.views)+" ")],1),n("li",[n("Icon",{attrs:{type:"ios-star-outline"}}),t._v(" 收藏量 "+t._s(e.stars)+" ")],1),n("li",[n("Button",{on:{click:function(n){return t.deletePosting(e.postingId)}}},[t._v("删除")])],1)])],2)})),1)],1),n("TabPane",{attrs:{label:"我的关注",disabled:t.userTab,name:"user"}},[n("List",t._l(t.userList,(function(e){return n("ListItem",{key:e.userId,staticStyle:{"text-align":"left"}},[n("ListItemMeta",{attrs:{description:e.introduction}},[n("template",{slot:"avatar"},[n("avatar",{attrs:{src:e.avatar,size:"40"}})],1),n("template",{slot:"title"},[n("router-link",{attrs:{to:{path:"/personalPage",query:{userId:e.userId}}}},[n("div",{staticStyle:{"font-size":"24px"}},[t._v(" "+t._s(e.username)+" ")])])],1)],2),n("template",{slot:"action"},[n("li",[n("Button",{attrs:{type:"primary"},on:{click:function(n){return t.unfollow(e.userId)}}},[t._v("取消关注")])],1)])],2)})),1)],1)],1)],1),n("Button",{staticStyle:{margin:"20px auto"},attrs:{type:"primary",loading:t.loading,icon:"ios-more",shape:"circle"},on:{click:t.toLoading}},[t.loading?n("span",[t._v("Loading...")]):n("span",[t._v("加载更多")])])],1)},Pt=[],Mt="",Rt=_.a.create({baseURL:Mt,headers:{"Content-Type":"application/json"}}),Et=function(t){return t},zt={getUserInfo:function(t,e){Rt.request({url:"testData"==Mt?"/userInfo.json":"/personalPage",method:"GET",params:{userId:t}}).then((function(t){var n=t.data.userInfo;e(n)})).catch((function(t){window.console.log(t)}))},changeUserInfo:function(t,e,n,i,a,o,s){Rt.request({url:"testData"===Mt?"/editUserInfoConfirm.json":"/changeInfo",method:"GET",params:{userId:t,avatar:e,userName:n,gender:i,email:a,introduction:o}}).then((function(t){var e=t.data.ok;s(e)}))},getMyPage:function(t,e,n,i){Rt.request({url:"testData"===Mt?"myFavorite"===e?"/MyFavo.json":"myPost"===e?"/myPost.json":"/myFocus.json":"/personalPage",method:"GET",params:{userId:t,type:e,page:n}}).then((function(t){var e=t.data.list.map((function(t){return Et(t)}));i(e)})).catch((function(t){window.console.log(t)}))},unfollowUser:function(t,e,n){Rt.request({url:"testData"===Mt?"/editUserInfoConfirm.json":"/personalPage/personalList",method:"GET",params:{userId:t,followedId:e}}).then((function(t){var e=t.data;n(e)}))},deletePost:function(t,e,n){Rt.request({url:"testData"===Mt?"/editUserInfoConfirm.json":"/personalPage/personalList",method:"GET",params:{userId:t,postingId:e}}).then((function(t){var e=t.data;n(e)}))}},Ct={name:"PersonalList",data:function(){return{loading:!1,favoriteList:[],postList:[],userList:[],tabType:"posting"}},computed:{postingTab:function(){return"posting"!==this.$route.query.type&&void 0!==this.$route.query.type&&"postingbytag"!==this.$route.query.type},topicTab:function(){return"topic"!==this.$route.query.type&&void 0!==this.$route.query.type},userTab:function(){return"user"!==this.$route.query.type&&void 0!==this.$route.query.type}},methods:{handleReachBottom:function(){var t=this;return new Promise((function(e){setTimeout((function(){for(var i,a=t.favoriteList.length,o=1;o<6;o++)i=a+o,"posting"===t.tabType?t.favoriteList.push({postingId:"posting id "+i,title:"This is title "+i,topic:["Topic1","Topic2","Topic3"],avatar:n("96cd")("./"+i+".jpg"),content:"This is the content, this is the content, this is the content, this is the content.",pic:n("ecb5")("./"+i+".jpg")}):"topic"===t.tabType?t.postList.push({postingId:"posting id "+i,title:"This is title "+i,topic:["Topic1","Topic2","Topic3"],avatar:n("96cd")("./"+i+".jpg"),content:"This is the content, this is the content, this is the content, this is the content.",pic:n("ecb5")("./"+i+".jpg")}):"user"===t.tabType&&t.userList.push({userName:"newusername"+i,userId:"newuserid"+i,avatar:n("96cd")("./"+i+".jpg")});e(),t.loading=!1}),2e3)}))},pageResize:function(){var t=this;this.$nextTick((function(){t.avaiHeight=document.documentElement.clientHeight-60}))},unfollow:function(t){var e=this;zt.unfollowUser(this.$root.userId,t,(function(t){0===t["isSuccess"]?(e.$Message.success("取关成功！"),e.updateList()):e.$Message.error("取关失败")}))},deletePosting:function(t){var e=this;!0===this.$root.hasLogin&&zt.deletePost(this.$root.userId,t,(function(t){0===t["isSuccess"]?(e.updateList(),e.$Message.success("删除成功！")):e.$Message.error("删除失败！")}))},toLoading:function(){this.loading=!0,this.handleReachBottom()},changeType:function(){return"posting"===this.tabType?"myFavorite":"topic"===this.tabType?"myPost":"user"===this.tabType?"myFocus":void 0},updateList:function(){var t=this;this.favoriteList=void 0,this.postList=void 0,this.userList=void 0;var e=this.changeType();zt.getMyPage(this.$root.userId,e,"1",(function(n){"myFavorite"===e?t.favoriteList=n:"myPost"===e?t.postList=n:"myFocus"===e&&(t.userList=n)}))}},created:function(){this.updateList()},mounted:function(){var t=this;window.onresize=function(){t.pageResize()}},destroyed:function(){window.onresize=null},watch:{tabType:function(){this.updateList()}}},Ft=Ct,Bt=Object(d["a"])(Ft,Dt,Pt,!1,null,"9378e422",null),Vt=Bt.exports,Ot={name:"PersonalPage",components:{PersonalList:Vt},data:function(){return{user:{avatar:"",username:"",intro:""}}},methods:{showInfo:function(){var t=this;!0===this.$root.hasLogin&&zt.getUserInfo(this.$root.userId,(function(e){t.user.avatar=e["avatar"],t.user.username=e["userName"],t.user.intro=e["introduction"]}))}},created:function(){this.showInfo()}},Ut=Ot,At=(n("d259"),Object(d["a"])(Ut,Lt,St,!1,null,null,null)),Ht=At.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Scroll",{staticStyle:{"max-width":"480px",margin:"0 0 0 20px"},attrs:{height:t.avaiHeight}},[n("card",{staticStyle:{"margin-top":"20px","margin-right":"50px",padding:"5px 0 0 5px","text-align":"left"},attrs:{title:"关于此贴的问答",icon:"md-help"}},t._l(t.qlist,(function(e){return n("CellGroup",{key:e.questionId,staticStyle:{padding:"0 0 10px 0"}},[n("Cell",{attrs:{title:e.content,to:{path:"answer",query:{postingId:t.postingId,questionId:e.questionId}}}},[n("template",{slot:"label"},[t._v(" "+t._s(e.time)+" ")]),n("template",{slot:"icon"},[n("img",{staticStyle:{width:"12px"},attrs:{src:e.avatarDir}}),t._v(" 提问者ID："+t._s(e.questionerId)+" ")])],2)],1)})),1),n("Button",{staticStyle:{margin:"20px auto"},attrs:{type:"primary",loading:t.loadingQlist,icon:"ios-more",shape:"circle"},on:{click:t.toLoadingQlist}},[t.loadingQlist?n("span",[t._v("Loading...")]):n("span",[t._v("加载更多")])]),n("Button",{staticStyle:{margin:"20px"},attrs:{type:"primary",icon:"md-help-buoy",shape:"circle",disabled:!t.ableToQuestion},on:{click:t.question}},[t.ableToQuestion?n("span",[t._v("提问")]):n("span",[t._v("请先登录")])]),n("Modal",{attrs:{title:"提问",loading:t.submitLoading},on:{"on-ok":t.submitQuestion},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("Input",{attrs:{maxlength:"200","show-word-limit":"",type:"textarea",placeholder:"描述你的问题"},model:{value:t.questionText,callback:function(e){t.questionText=e},expression:"questionText"}})],1)],1)},Gt=[],Nt="",Jt=_.a.create({baseURL:Nt,headers:{"Content-Type":"application/json"}}),Wt={get:function(t,e,n,i){Jt.request({url:"testData"==Nt?"editSubmit.json":"/submitquestion",method:"GET",params:{postingId:t,content:e,questionerId:n}}).then((function(t){var e=t.data.response;i(e)})).catch((function(t){window.console.log(t)}))}},Kt={name:"Question",data:function(){return{avaiHeight:document.documentElement.clientHeight-60,loadingQlist:!1,qlist:[],questionPage:0,ableToQuestion:this.$root.hasLogin,modal:!1,questionText:"",submitLoading:!1}},methods:{handleReachBottomQlist:function(){var t=this;return new Promise((function(e){setTimeout((function(){tt.get(t.postingId,0,t.questionPage+1,(function(e){for(var n in e.list)t.qlist.push(e.list[n]);t.questionPage+=1})),e(),t.loadingQlist=!1}),10)}))},pageResize:function(){var t=this;this.$nextTick((function(){t.avaiHeight=document.documentElement.clientHeight-60}))},toLoadingQlist:function(){this.loadingQlist=!0,this.handleReachBottomQlist()},question:function(){this.modal=!0},submitQuestion:function(){var t=this;""==this.questionText?this.$Message.error("提问内容不能为空"):(this.submitLoading=!0,Wt.get(this.postingId,this.questionText,this.$root.uesrId,(function(e){200===e?(t.$Message.success("提问成功"),t.questionText=""):t.$Message.error("提问失败"),t.submitLoading=!1})))}},computed:{postingId:function(){return this.$route.query.postingId}},mounted:function(){var t=this;if(null!==window.onresize){var e=window.onresize;window.onresize=function(){e(),t.pageResize()}}else window.onresize=function(){t.pageResize()}},destroyed:function(){window.onresize=null},created:function(){var t=this;tt.get(this.postingId,0,1,(function(e){t.qlist=e.list,t.questionPage=1}))}},Xt=Kt,Yt=(n("dc36"),Object(d["a"])(Xt,Qt,Gt,!1,null,"39516596",null)),Zt=Yt.exports,te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Scroll",{staticStyle:{"max-width":"480px",margin:"0 0 0 20px"},attrs:{height:t.avaiHeight}},[n("card",{staticStyle:{"margin-top":"20px","margin-right":"50px",padding:"5px 0px 0px 20px","text-align":"left"}},[n("p",{attrs:{slot:"title"},slot:"title"},[n("icon",{attrs:{type:"md-happy"}}),t._v(" 问题ID："+t._s(t.questionId)+" ")],1),n("p",{attrs:{slot:"extra"},slot:"extra"},[n("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-arrow-back",to:{path:"question",query:{postingId:t.postingId}}}})],1),n("List",{attrs:{"item-layout":"vertical"}},t._l(t.alist,(function(e){return n("ListItem",{key:e.time,staticStyle:{"text-align":"left"}},[n("ListItemMeta",{attrs:{description:e.time,avatar:e.avatarDir}}),t._v(" "+t._s(e.content)+" ")],1)})),1)],1),n("Button",{staticStyle:{margin:"20px auto"},attrs:{type:"primary",loading:t.loadingQlist,icon:"ios-more",shape:"circle"},on:{click:t.toLoadingQlist}},[t.loadingQlist?n("span",[t._v("Loading...")]):n("span",[t._v("加载更多")])]),n("Button",{staticStyle:{margin:"20px"},attrs:{type:"primary",icon:"md-hand",shape:"circle",disabled:!t.ableToAnswer},on:{click:t.answer}},[t.ableToAnswer?n("span",[t._v("回答")]):n("span",[t._v("请先登录")])]),n("Modal",{attrs:{title:"回答",loading:t.submitLoading},on:{"on-ok":t.submitAnswer},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("Input",{attrs:{maxlength:"200","show-word-limit":"",type:"textarea",placeholder:"写下你的答案"},model:{value:t.answerText,callback:function(e){t.answerText=e},expression:"answerText"}})],1)],1)},ee=[],ne="",ie=_.a.create({baseURL:ne,headers:{"Content-Type":"application/json"}}),ae=function(t){return t},oe={get:function(t,e,n){ie.request({url:"testData"==ne?"postingAnswer.json":"/posting/answer",method:"GET",params:{questionId:t,answerPage:e}}).then((function(t){var e=t.data.list.map((function(t){return ae(t)}));n(e)})).catch((function(t){window.console.log(t)}))}},se="",re=_.a.create({baseURL:se,headers:{"Content-Type":"application/json"}}),le={get:function(t,e,n,i){re.request({url:"testData"==se?"editSubmit.json":"/submitanswer",method:"GET",params:{questionId:t,content:e,answererId:n}}).then((function(t){var e=t.data.response;i(e)})).catch((function(t){window.console.log(t)}))}},ue={name:"Answer",data:function(){return{avaiHeight:document.documentElement.clientHeight-60,loadingQlist:!1,alist:[],answerPage:0,ableToAnswer:this.$root.hasLogin,modal:!1,answerText:"",submitLoading:!1}},methods:{handleReachBottomQlist:function(){var t=this;return new Promise((function(e){setTimeout((function(){oe.get(t.questionId,t.answerPage+1,(function(e){for(var n in e)t.alist.push(e[n]);t.answerPage+=1})),e(),t.loadingQlist=!1}),10)}))},pageResize:function(){var t=this;this.$nextTick((function(){t.avaiHeight=document.documentElement.clientHeight-60}))},toLoadingQlist:function(){this.loadingQlist=!0,this.handleReachBottomQlist()},back:function(){this.$router.push({path:"question",query:{postingId:this.postingId}})},answer:function(){this.modal=!0},submitAnswer:function(){var t=this;""==this.answerText?this.$Message.error("回答内容不能为空"):(this.submitLoading=!0,le.get(this.questionId,this.answerText,this.$root.uesrId,(function(e){200===e?(t.$Message.success("回答成功"),t.answerText=""):t.$Message.error("提交失败"),t.submitLoading=!1})))}},computed:{questionId:function(){return this.$route.query.questionId},postingId:function(){return this.$route.query.postingId}},mounted:function(){var t=this;if(null!==window.onresize){var e=window.onresize;window.onresize=function(){e(),t.pageResize()}}else window.onresize=function(){t.pageResize()}},destroyed:function(){window.onresize=null},created:function(){var t=this;oe.get(this.questionId,1,(function(e){t.alist=e,t.answerPage=1}))}},ce=ue,pe=Object(d["a"])(ce,te,ee,!1,null,"3e903fde",null),de=pe.exports,ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"800px",margin:"20px auto 0 auto",padding:"20px 20px",background:"snow"}},[n("div",{staticStyle:{display:"flex"}},[n("Button",{attrs:{type:"dashed",to:"/personalPage"}},[n("Icon",{attrs:{type:"ios-arrow-back"}}),t._v(" Backward ")],1)],1),n("div",{staticStyle:{width:"500px",margin:"50px auto 0 auto"}},[n("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[n("FormItem",{attrs:{label:"",prop:"avatar"}},[n("avatar",{staticStyle:{float:"left"},attrs:{src:t.formValidate.avatar,size:"80"}}),n("div",[n("Button",{staticStyle:{margin:"25px 140px 0 0"},attrs:{icon:"ios-camera"},on:{click:function(e){return e.stopPropagation(),t.uploadHeadImg(e)}}},[t._v("更换头像")]),n("input",{staticClass:"hiddenInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.handleFile}})],1)],1),n("FormItem",{attrs:{label:"昵称",prop:"name"}},[n("Input",{attrs:{placeholder:"Enter your name"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),n("FormItem",{attrs:{label:"邮箱",prop:"mail"}},[n("Input",{attrs:{placeholder:"Enter your e-mail"},model:{value:t.formValidate.mail,callback:function(e){t.$set(t.formValidate,"mail",e)},expression:"formValidate.mail"}})],1),n("FormItem",{attrs:{label:"性别",prop:"gender"}},[n("RadioGroup",{staticStyle:{display:"flex"},model:{value:t.formValidate.gender,callback:function(e){t.$set(t.formValidate,"gender",e)},expression:"formValidate.gender"}},[n("Radio",{attrs:{label:"男"}},[t._v("男")]),n("Radio",{attrs:{label:"女"}},[t._v("女")])],1)],1),n("FormItem",{attrs:{label:"简介",prop:"desc"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"Enter something to introduce yourself"},model:{value:t.formValidate.desc,callback:function(e){t.$set(t.formValidate,"desc",e)},expression:"formValidate.desc"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("Submit")]),n("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("Reset")])],1)],1)],1)])},me=[],he={name:"ChangeInfo",data:function(){return{formValidate:{avatar:"",name:"",mail:"",gender:"",desc:""},ruleValidate:{name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],mail:[{required:!0,message:"Mailbox cannot be empty",trigger:"blur"},{type:"email",message:"Incorrect email format",trigger:"blur"}],city:[{required:!0,message:"Please select the city",trigger:"change"}],gender:[{required:!0,message:"Please select gender",trigger:"change"}],interest:[{required:!0,type:"array",min:1,message:"Choose at least one hobby",trigger:"change"},{type:"array",max:2,message:"Choose two hobbies at best",trigger:"change"}],date:[{required:!0,type:"date",message:"Please select the date",trigger:"change"}],time:[{required:!0,type:"string",message:"Please select time",trigger:"change"}],desc:[{required:!0,message:"Please enter a personal introduction",trigger:"blur"},{type:"string",min:10,message:"Introduce no less than 20 words",trigger:"blur"}]}}},methods:{showForm:function(t){var e=this;zt.getUserInfo(t,(function(t){e.formValidate.avatar=t["avatar"],e.formValidate.name=t["userName"],e.formValidate.mail=t["email"],e.formValidate.desc=t["introduction"],0===t["gender"]?e.formValidate.gender="男":e.formValidate.gender="女"}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(t){if("男"===e.formValidate.gender)var n=0;else n=1;zt.changeUserInfo(e.$root.userId,e.formValidate.avatar,e.formValidate.name,n,e.formValidate.mail,e.formValidate.desc,(function(t){0===t["isSuccess"]?e.$Message.success("修改成功!"):e.$Message.error("修改失败，请重新提交！")}))}else e.$Message.error("信息格式不正确!")}))},handleReset:function(t){this.$refs[t].resetFields()},uploadHeadImg:function(){this.$el.querySelector(".hiddenInput").click()},handleFile:function(t){var e=this,n=t.target||t.srcElement,i=n.files[0],a=new FileReader;a.onload=function(t){var n=t.target||t.srcElement;e.formValidate.avatar=n.result},a.readAsDataURL(i)}},created:function(){!0===this.$root.hasLogin&&this.showForm(this.$root.userId)}},fe=he,ye=Object(d["a"])(fe,ge,me,!1,null,null,null),ve=ye.exports,be={template:"<p>Page not found</p>"},xe=[{path:"/",component:v,redirect:"index",children:[{path:"index",component:W},{path:"edit",component:E},{path:"posting",component:ct,redirect:"posting/question",children:[{path:"question",component:Zt},{path:"answer",component:de}]},{path:"login",component:bt},{path:"register",component:kt},{path:"personalPage",component:Ht,redirect:"personalPage/personalList",children:[{path:"personalList",component:Vt}]},{path:"changeInfo",component:ve},{path:"search",component:W}]},{path:"*",component:be}],we=new o["a"]({routes:xe}),Ie=o["a"].prototype.push;o["a"].prototype.push=function(t,e,n){return e||n?Ie.call(this,t,e,n):Ie.call(this,t).catch((function(t){return t}))},a.a.config.productionTip=!1,a.a.use(x.a,{}),a.a.use(o["a"]),new a.a({router:we,data:function(){return{hasLogin:!1,userId:-1}}}).$mount("#app")},"5db8":function(t,e,n){t.exports=n.p+"img/15.0abade6b.jpg"},"68dd":function(t,e,n){t.exports=n.p+"img/9.fcc94bdc.jpg"},7174:function(t,e,n){},"75b5":function(t,e,n){t.exports=n.p+"img/6.1b177298.jpg"},"7a15":function(t,e,n){t.exports=n.p+"img/12.0ca651eb.jpg"},"80f2":function(t,e,n){t.exports=n.p+"img/3.8abf76f1.jpg"},"85ec":function(t,e,n){},"958e":function(t,e,n){t.exports=n.p+"img/1.cc6a1971.jpg"},"96cd":function(t,e,n){var i={"./1.jpg":"52f0","./10.jpg":"39c6","./11.jpg":"e19b","./12.jpg":"e657","./13.jpg":"9a1e","./14.jpg":"42ff","./15.jpg":"b12a","./2.jpg":"96f2","./3.jpg":"80f2","./4.jpg":"bfdd","./5.jpg":"1965","./6.jpg":"b00a","./7.jpg":"3d27","./8.jpg":"42c9","./9.jpg":"68dd"};function a(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=o,t.exports=a,a.id="96cd"},"96f2":function(t,e,n){t.exports=n.p+"img/2.fdac6ec4.jpg"},"9a1e":function(t,e,n){t.exports=n.p+"img/13.81e41308.jpg"},ab2d:function(t,e,n){t.exports=n.p+"img/9.f0819422.jpg"},b00a:function(t,e,n){t.exports=n.p+"img/6.7c65485f.jpg"},b12a:function(t,e,n){t.exports=n.p+"img/15.5cdb2522.jpg"},bd0b:function(t,e,n){t.exports=n.p+"img/2.711c8def.jpg"},bfdd:function(t,e,n){t.exports=n.p+"img/4.484b930e.jpg"},d259:function(t,e,n){"use strict";var i=n("2258"),a=n.n(i);a.a},d2a7:function(t,e,n){t.exports=n.p+"img/8.bba287ad.jpg"},dc36:function(t,e,n){"use strict";var i=n("fec4"),a=n.n(i);a.a},e19b:function(t,e,n){t.exports=n.p+"img/11.020ad5e2.jpg"},e657:function(t,e,n){t.exports=n.p+"img/12.fc1877b6.jpg"},ecb5:function(t,e,n){var i={"./1.jpg":"958e","./10.jpg":"34db","./11.jpg":"fe06","./12.jpg":"7a15","./13.jpg":"2bba","./14.jpg":"38de","./15.jpg":"5db8","./2.jpg":"bd0b","./3.jpg":"1515","./4.jpg":"4d74","./5.jpg":"5447","./6.jpg":"75b5","./7.jpg":"219e","./8.jpg":"d2a7","./9.jpg":"ab2d"};function a(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=o,t.exports=a,a.id="ecb5"},f30e:function(t,e,n){"use strict";var i=n("0ea0"),a=n.n(i);a.a},fe06:function(t,e,n){t.exports=n.p+"img/11.ef745741.jpg"},fec4:function(t,e,n){}});
//# sourceMappingURL=app.630fd2b0.js.map